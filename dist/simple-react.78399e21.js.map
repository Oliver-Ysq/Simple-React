{"version":3,"sources":["src/SmpReact/main_methods/createElement.js","src/SmpReact/utils/dom.js","src/SmpReact/main_methods/lifeCycle.js","src/SmpReact/dom_methods/render.js","src/SmpReact/dom_methods/diff.js","src/SmpReact/main_methods/update.js","src/SmpReact/main_methods/Component.js","src/SmpReact/SmpReact.js","src/SmpReact/SmpReactDom.js","src/components/Header/Header.jsx","src/components/Footer/Footer.jsx","src/components/Counter/Counter.jsx","src/components/TodoList/TodoList.jsx","App.jsx","index.jsx","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/css-loader.js","node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["createVNode","type","props","ref","key","children","domElm","text","createElement","tag","elementName","data","attributes","length","i","child","includes","undefined","String","dom","vnode","document","createTextNode","setTextContent","content","nodeValue","getParentNode","elm","parentNode","appendChild","parent","Array","isArray","item","removeChild","getNextSibling","nextSibling","insertBefore","newNode","refNode","insertAfter","before","lastChild","addClass","classList","add","cls","bindEvent","fn","addEventListener","removeEvent","removeEventListener","setAttr","value","setAttribute","removeAttr","removeAttribute","triggerHook","name","_hooks","hooks","hook","createDomElement","list","push","renderComponent","newDom","setDomProps","keys","Object","startsWith","eventName","substring","toLowerCase","console","log","split","compVNode","Comp","instance","prototype","render","__nextProps","__nextState","state","__createVNode","className","__component","component","parentDom","diff","oldVNode","newVNode","isSameVNode","diffComponent","diffVNode","replaceVNode","oldCompVNode","newCompVNode","nextProps","__dirty","oldChild","oldText","oldProps","newChild","newText","newProps","diffProps","hasOldChild","Boolean","hasNewChild","diffChildren","addVNodes","removeVNodes","oldDomElm","newDomElm","oldV","newV","start","end","parentElm","oldStartIdx","newStartIdx","oldEndIdx","newEndIdx","oldStartVNode","oldEndVNode","newStartVNode","newEndVNode","oldKeyToIdx","idxInOld","elmToMove","createKeyList","map","defer","Promise","resolve","then","updateQueue","enqueueRender","updater","flushRenderQueue","sort","curUpdater","pop","__update","flushCallback","callbacks","__setStateCallbacks","cbk","shift","call","Component","prevProps","prevState","snapshot","__hooks","create","insert","componentDidMount","willupdate","__snapshot","getSnapshotBeforeUpdate","__prevProps","__prevState","update","componentDidUpdate","willremove","componentWillUnmount","__vnode","operater","callback","deepEqual","object1","object2","keys1","keys2","index","val1","val2","areObjects","isObject","object","SmpReact","SmpReactDom","Header","imgsrc","page","setPage","Footer","interval","Counter","canIclick","disabled","x","calc","bind","setInterval","clearInterval","e","parseInt","target","id","setN","n","Error","setState","that","TodoList","v","App","done","newN","newPage","getElementById","bundleURL","getBundleURLCached","getBundleURL","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","Date","now","cssTimeout","reloadCSS","setTimeout","links","querySelectorAll","module","OVERLAY_ID","OldModule","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","clear","hmrApply","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","message","overlay","createErrorOverlay","body","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"simple-react.78399e21.js","sourceRoot":"..","sourcesContent":["// 创建一个虚拟dom\r\nexport function createVNode(type, props, ref, key, children, domElm, text) {\r\n  return {\r\n    type, //标签类型\r\n    props,  //标签属性\r\n    children, //子组件\r\n    ref,  //获取DOM元素\r\n    key,  //唯一标识\r\n    domElm,  //DOM元素\r\n    text, //文本内容\r\n  };\r\n}\r\n\r\nexport default function createElement(tag) {\r\n  const {elementName: type, attributes: data, children} = tag;\r\n  const {key, ref, ...props} = data;\r\n\r\n  // 处理子级列表中的 string or number 同样转换为 VNode\r\n  if (children && children.length) {\r\n    const length = children.length;\r\n    for (let i = 0; i < length; i++) {\r\n      const child = children[i];  //对每一个子节点进行遍历\r\n      if (['string', 'number'].includes(typeof child)) {\r\n        // 非标签的文字节点， vnode.type === undefined\r\n        children[i] = createVNode(\r\n          undefined,\r\n          {},\r\n          undefined,\r\n          undefined,\r\n          undefined,\r\n          undefined,\r\n          String(children[i])\r\n        );\r\n      }\r\n    }\r\n  }\r\n  return createVNode(type, props, ref, key, children, undefined, undefined);\r\n}","/*\r\n  原生dom操作\r\n* */\r\n\r\nconst dom = {\r\n  //根据vnode.type创建dom元素\r\n  createElement(vnode) {\r\n    return document.createElement(vnode.type);\r\n  },\r\n\r\n  //创建text节点\r\n  createTextNode(text) {\r\n    return document.createTextNode(text);\r\n  },\r\n\r\n  //修改文本节点的值\r\n  setTextContent(domElm, content) {\r\n    if (domElm && ['string', 'number'].includes(typeof content)) {\r\n      domElm.nodeValue = content;\r\n    }\r\n  },\r\n\r\n  //得到父元素\r\n  getParentNode(elm) {\r\n    return elm && elm.parentNode;\r\n  },\r\n\r\n  //增加子元素\r\n  appendChild(parent, child) {\r\n    // 若在JSX中渲染列表，则需要批量处理。\r\n    if (Array.isArray(child)) {\r\n      for (let item of child) {\r\n        parent.appendChild(item);\r\n      }\r\n    } else {\r\n      parent.appendChild(child);\r\n    }\r\n  },\r\n\r\n  //删除指定子元素\r\n  removeChild(parent, child) {\r\n    if (child && parent && child.parentNode) {\r\n      parent.removeChild(child);\r\n    }\r\n  },\r\n\r\n  //获取兄弟元素\r\n  getNextSibling(domElm) {\r\n    return domElm.nextSibling === null ? false : domElm.nextSibling;\r\n  },\r\n\r\n  //在前边插入节点\r\n  insertBefore(parent, newNode, refNode) {\r\n    if (refNode) {\r\n      parent.insertBefore(newNode, refNode);\r\n    } else {\r\n      dom.appendChild(parent, newNode);\r\n    }\r\n  },\r\n\r\n  //在后边插入节点\r\n  insertAfter(parent, newNode, before) {\r\n    if (parent.lastChild === before) {\r\n      parent.appendChild(newNode);\r\n    } else {\r\n      parent.insertBefore(newNode, before);\r\n    }\r\n  },\r\n\r\n  //绑定class\r\n  addClass(domElm, classList) {\r\n    if (typeof classList === 'string')\r\n      domElm.classList.add(classList);\r\n    else if (Array.isArray(classList)) {\r\n      for (let cls of classList) {\r\n        domElm.classList.add(cls);\r\n      }\r\n    }\r\n  }\r\n  ,\r\n\r\n  //绑定事件\r\n  bindEvent(domElm, type, fn) {\r\n    domElm.addEventListener(type, fn);\r\n  },\r\n\r\n  //解绑事件\r\n  removeEvent(domElm, type, fn) {\r\n    domElm.removeEventListener(type, fn);\r\n  },\r\n\r\n  //设置属性\r\n  setAttr(domElm, key, value) {\r\n    domElm.setAttribute(key, value);\r\n  },\r\n\r\n  //删除属性\r\n  removeAttr(domElm, key) {\r\n    domElm.removeAttribute(key);\r\n  },\r\n\r\n};\r\nexport default dom;","/*\r\n* hooks:\r\n*   create  //创建后\r\n*   insert  //挂载后\r\n*   willupdate  //更新前\r\n*   update  //更新后\r\n*   willremove  //卸载前\r\n* */\r\n\r\nexport function triggerHook(vnode, name) {\r\n  if (!Array.isArray(vnode)) {\r\n    const {hooks: _hooks} = vnode;\r\n    let hook;\r\n    if (_hooks) {\r\n      hook = _hooks[name];\r\n      hook && hook(vnode);\r\n    }\r\n  } else {\r\n    for (let i = 0; i <= vnode.length; i++) {\r\n      const {hooks: _hooks} = vnode[i];\r\n      let hook;\r\n      if (_hooks) {\r\n        hook = _hooks[name];\r\n        hook && hook(...vnode[i]);\r\n      }\r\n    }\r\n  }\r\n}","import dom from \"../utils/dom\";\r\nimport {triggerHook} from \"../main_methods/lifeCycle\";\r\n\r\n// 创建dom元素：虚拟dom => dom\r\nexport function createDomElement(vnode) {\r\n  //若type为function：组件元素\r\n  //先render出vnode节点\r\n\r\n  if (Array.isArray(vnode)) {\r\n    //如果是vnode是列表，则批量创建dom，并返回dom列表\r\n\r\n    let list = [];\r\n    for (let i = 0; i < vnode.length; i++)\r\n      list.push(createDomElement(vnode[i]));\r\n    return list;\r\n\r\n  } else {\r\n    if (typeof vnode.type === 'function') {\r\n      /**********    组件 ==> 组件实例 ==> 元素节点（elVNode）    ***********/\r\n      vnode = renderComponent(vnode);\r\n    }\r\n    const {children, type, text, props} = vnode;\r\n    if (type && typeof type === 'string') {\r\n      //type为字符串：dom元素\r\n      vnode.domElm = dom.createElement(vnode);//创建当前dom元素\r\n      // triggerHook(vnode, 'create');\r\n      if (Array.isArray(children)) {\r\n        //递归创建子元素\r\n        for (let i = 0; i < children.length; i++) {\r\n          let newDom = createDomElement(children[i]);\r\n          dom.appendChild(vnode.domElm, newDom);\r\n          triggerHook(Array.isArray(newDom) ? newDom[0].vnode : newDom.vnode, 'insert');\r\n        }\r\n\r\n      }\r\n    } else if ((type === undefined || type === null) && text) {\r\n      //type为undefined：文本节点\r\n      vnode.domElm = dom.createTextNode(text);\r\n    }\r\n\r\n    if (vnode.domElm) {//如果创建成功了，则设置dom元素的属性\r\n      setDomProps(vnode.domElm, props);\r\n\r\n      vnode.domElm.vnode = vnode; //为dom元素记录下创造它的vnode\r\n\r\n      return vnode.domElm;  //将创建的dom元素 和 insert周期 同时返回\r\n    } else {  //创建失败，则renderComponent后的vnode依然是组件节点，需要递归render\r\n      return createDomElement(vnode);\r\n    }\r\n  }\r\n}\r\n\r\n// 为dom元素设置属性\r\nexport function setDomProps(domElm, props) {\r\n  if (domElm && typeof props === 'object') {\r\n    const keys = Object.keys(props);\r\n    for (let i = 0; i < keys.length; i++) {\r\n\r\n      const key = keys[i];\r\n      const value = props[key];\r\n\r\n      if (key.startsWith('on')) {\r\n        // 事件绑定\r\n        if (typeof value === 'function') {\r\n          const eventName = key.substring(2).toLowerCase();  // 去出on之后的字符串并转换为小写\r\n          dom.bindEvent(domElm, eventName, value);\r\n        } else {\r\n          console.log('Invalid EventHandler');\r\n        }\r\n      } else if (key === 'className' && typeof value === 'string') {\r\n        // 添加class\r\n        let classList = value.split(\" \");\r\n        dom.addClass(domElm, classList);\r\n      } else {\r\n        // 属性设置\r\n        dom.setAttr(domElm, key, value);\r\n      }\r\n\r\n    }\r\n  }\r\n}\r\n\r\n/**********    组件 ==> 组件实例 ==> 元素节点（elVNode）    ***********/\r\nexport function renderComponent(compVNode) {\r\n  const {type: Comp, props} = compVNode;  //compVNode：组件； instance：组件实例。  vnode：元素节点；\r\n  let instance = compVNode.instance;\r\n  // 当 instance 已经存在时，则不需要重新创建实例\r\n  if (!instance) {\r\n    // 传入 props，初始化组件实例\r\n    // 支持：类组件、函数组件\r\n    if (Comp.prototype && Comp.prototype.render) {\r\n      instance = new Comp(props);\r\n    }\r\n\r\n    // 初次渲染时：将来的属性与状态其实便是与当前值一致\r\n    instance.__nextProps = props;\r\n    instance.__nextState = instance.state;\r\n  }\r\n\r\n  // 调用 render 获取元素节点 VNode\r\n  const vnode = instance.__createVNode();\r\n\r\n  //class继承\r\n  if (props.className) vnode.props.className = props.className;\r\n\r\n  // 组件、元素、实例之间保持相互引用，有利于双向连接整棵虚拟树\r\n  instance.__component = compVNode; //组件\r\n  compVNode.instance = instance;  //组件实例\r\n  compVNode.vnode = vnode;    //元素节点\r\n  vnode.component = compVNode;  //组件\r\n\r\n  return vnode;\r\n}\r\n\r\n// 渲染函数\r\nexport default function render(vnode, parentDom) {\r\n  const domElm = createDomElement(vnode); //创建dom元素（可能是dom元素列表）\r\n  dom.appendChild(parentDom, domElm);  //将dom元素插入父节点\r\n  triggerHook(domElm.vnode, 'insert');\r\n  return domElm;\r\n}","import dom from \"../utils/dom\";\r\nimport {createDomElement, renderComponent, setDomProps} from \"./render\";\r\nimport {triggerHook} from \"../main_methods/lifeCycle\";\r\n\r\n//新旧节点相同：diff算法\r\nexport function diff(oldVNode, newVNode) {\r\n  if (isSameVNode(oldVNode, newVNode)) {\r\n    if (typeof oldVNode.type === 'function') {\r\n      // 组件节点\r\n      diffComponent(oldVNode, newVNode);\r\n    } else {\r\n      // 元素节点，直接执行比对\r\n      diffVNode(oldVNode, newVNode);\r\n    }\r\n  } else {\r\n    console.log('not same vnode');\r\n    replaceVNode(oldVNode, newVNode);\r\n  }\r\n}\r\n\r\n//组件节点diff\r\nfunction diffComponent(oldCompVNode, newCompVNode) {\r\n  const {instance, vnode: oldVNode, elm} = oldCompVNode;\r\n  const {props: nextProps} = newCompVNode;\r\n\r\n  if (instance && oldVNode) {\r\n    instance.__dirty = false;\r\n\r\n    // 更新状态和属性\r\n    instance.__nextProps = nextProps;\r\n    if (!instance.__nextState) instance.__nextState = instance.state;\r\n\r\n    // 复用旧组件实例和元素\r\n    newCompVNode.instance = instance;\r\n    newCompVNode.elm = elm;\r\n\r\n    // 使用新属性、新状态，旧组件实例\r\n    // 重新生成 新虚拟DOM\r\n    const newVNode = renderComponent(newCompVNode);\r\n\r\n    // 递归触发 diff\r\n    diff(oldVNode, newVNode);\r\n  }\r\n}\r\n\r\n//元素节点diff\r\nfunction diffVNode(oldVNode, newVNode) {\r\n\r\n  const {domElm, children: oldChild, text: oldText, props: oldProps} = oldVNode;\r\n  const {children: newChild, text: newText, props: newProps} = newVNode;\r\n\r\n  if (oldVNode === newVNode || !domElm) return;\r\n\r\n  triggerHook(newVNode, 'willupdate');\r\n\r\n  // 节点相同，dom类型一定相同\r\n  newVNode.domElm = domElm;\r\n\r\n  //更新属性\r\n  diffProps(domElm, oldProps, newProps);\r\n\r\n  const hasOldChild = Boolean(oldChild && oldChild.length);\r\n  const hasNewChild = Boolean(newChild && newChild.length);\r\n\r\n  if (newText !== undefined) {\r\n    //新节点是文本节点\r\n    dom.setTextContent(domElm, newText);\r\n  } else {\r\n    // 新节点是元素节点\r\n    if (hasOldChild && hasNewChild) {\r\n      // 新旧节点均存在子级列表时，直接 diff 列表\r\n      if (oldChild !== newChild) diffChildren(domElm, oldChild, newChild);\r\n    } else if (hasNewChild) {\r\n      // 旧节点不包含子级，而新节点包含子级：直接新增新子级\r\n      addVNodes(domElm, null, newChild, 0, newChild.length - 1);\r\n    } else if (hasOldChild) {\r\n      // 新子级不包含元素，而旧节点包含子级：则需要删除旧子级\r\n      removeVNodes(domElm, oldChild, 0, oldChild.length - 1);\r\n    }\r\n  }\r\n\r\n  triggerHook(newVNode, 'update');\r\n\r\n}\r\n\r\n//新旧节点不同：直接替换\r\nfunction replaceVNode(oldVNode, newVNode) {\r\n\r\n  const {domElm: oldDomElm} = oldVNode;\r\n  const parentDom = dom.getParentNode(oldDomElm);\r\n\r\n  //删除旧dom\r\n  dom.removeChild(parentDom, oldDomElm);\r\n  //创建新dom\r\n  const newDomElm = createDomElement(newVNode);\r\n  dom.appendChild(parentDom, newDomElm);\r\n  triggerHook(newDomElm.vnode, 'insert');\r\n\r\n}\r\n\r\nfunction diffProps(domElm, oldProps, newProps) {\r\n  if (oldProps === newProps || !domElm) return;\r\n  if (typeof oldProps === 'object' && typeof newProps === 'object') {\r\n    let keys = Object.keys(oldProps);\r\n\r\n    //处理旧属性\r\n    for (let i = 0; i < keys.length; i++) {\r\n      const key = keys[i];\r\n      const oldV = oldProps[key], newV = newProps[key];\r\n\r\n      if (key.startsWith(\"on\")) {\r\n        //处理事件\r\n        if (typeof oldV === 'function' && oldV !== newV ) {\r\n\r\n          //当存在旧事件，且新旧值不一致时：事件解绑\r\n          //由于检测逻辑是对比函数地址，所以不支持行内使用：\r\n          //      onClick={()=>{...}} 或 onClick={this.fn.bind(this)}\r\n          //因为以上写法会生成新的函数导致无法对比\r\n\r\n          const eventName = key.substring(2).toLowerCase();\r\n          dom.removeEvent(domElm, eventName, oldV);\r\n        }\r\n      } else {\r\n        //普通属性处理\r\n        if (newV === undefined || (key === 'className' && (newV === false || newV === null))) {\r\n          // 若oldVNode中的属性在newVNode中不存在，则直接删除\r\n          dom.removeAttr(domElm, key === 'className' ? 'class' : key);\r\n        }\r\n      }\r\n    }\r\n\r\n    // 设置新属性\r\n    setDomProps(domElm, newProps);\r\n  }\r\n}\r\n\r\n//添加vnodes\r\nfunction addVNodes(domElm, before, children, start, end) {\r\n  before = !before ? null : before.domElm;\r\n  for (let i = start; i <= end; i++) {\r\n    let newDom;\r\n    if (children[i].domElm) {\r\n      newDom = children[i].domElm;\r\n      dom.insertAfter(domElm, newDom, before);\r\n    } else {\r\n      newDom = createDomElement(children[i]);\r\n      dom.insertAfter(domElm, newDom, before);\r\n      triggerHook(children[i].vnode, 'insert');\r\n    }\r\n    before = newDom;\r\n  }\r\n}\r\n\r\n//删除vnodes\r\nfunction removeVNodes(domElm, children, start, end) {\r\n  for (let i = start; i <= end; i++) {\r\n    triggerHook(children[i], 'willremove');\r\n    dom.removeChild(domElm, children[i].domElm);\r\n  }\r\n}\r\n\r\n//对比子级列表\r\nfunction diffChildren(parentElm, oldChild, newChild) {\r\n\r\n  /**\r\n   * 更新子级列表\r\n   * 双列表游标 + while\r\n   */\r\n\r\n  if (Array.isArray(oldChild[0])) oldChild = oldChild[0];\r\n  if (Array.isArray(newChild[0])) newChild = newChild[0];\r\n\r\n  // 初始化游标\r\n  let oldStartIdx = 0, newStartIdx = 0;\r\n  let oldEndIdx = oldChild.length - 1, newEndIdx = newChild.length - 1;\r\n\r\n  // 列表首尾节点\r\n  let oldStartVNode = oldChild[0], oldEndVNode = oldChild[oldEndIdx];\r\n  let newStartVNode = newChild[0], newEndVNode = newChild[newEndIdx];\r\n\r\n  let oldKeyToIdx, idxInOld, elmToMove, before;\r\n\r\n  /**\r\n   * 当起始游标 < 终止游标时，\r\n   * 表示列表中仍有未 diff 的节点\r\n   * 进入循环\r\n   */\r\n  while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\r\n    /**\r\n     * 1. 排除非有效的节点\r\n     * 剔除列表中包含的 undefined || false || null\r\n     */\r\n    if (oldStartVNode == null) oldStartVNode = oldChild[++oldStartIdx];\r\n    else if (oldEndVNode == null) oldEndVNode = oldChild[--oldEndIdx];\r\n    else if (newStartVNode == null) newStartVNode = newChild[++newStartIdx];\r\n    else if (newEndVNode == null) newEndVNode = newChild[--newEndIdx];\r\n    else if (isSameVNode(oldStartVNode, newStartVNode)) {\r\n      /**\r\n       * 2. 正反向两两比对列表首项与末项匹配成功\r\n       * 移动游标，递归 diff 两个节点\r\n       * 均未匹配上，则进入 3. key 值比对\r\n       */\r\n\r\n      diff(oldStartVNode, newStartVNode);\r\n\r\n      oldStartVNode = oldChild[++oldStartIdx];\r\n      newStartVNode = newChild[++newStartIdx];\r\n    } else if (isSameVNode(oldEndVNode, newEndVNode)) {\r\n\r\n      diff(oldEndVNode, newEndVNode);\r\n\r\n      oldEndVNode = oldChild[--oldEndIdx];\r\n      newEndVNode = newChild[--newEndIdx];\r\n    } else if (isSameVNode(oldStartVNode, newEndVNode)) {\r\n\r\n      dom.insertBefore(parentElm, oldStartVNode.domElm, dom.getNextSibling(oldEndVNode.domElm));\r\n      diff(oldStartVNode, newEndVNode);\r\n\r\n      oldStartVNode = oldChild[++oldStartIdx];\r\n      newEndVNode = newChild[--newEndIdx];\r\n    } else if (isSameVNode(oldEndVNode, newStartVNode)) {\r\n\r\n      dom.insertBefore(parentElm, oldEndVNode.domElm, oldStartVNode.domElm);\r\n      diff(oldEndVNode, newStartVNode);\r\n\r\n      oldEndVNode = oldChild[--oldEndIdx];\r\n      newStartVNode = newChild[++newStartIdx];\r\n    } else {\r\n      /**\r\n       * 3. 两端比对均不匹配\r\n       * 进入 key 值比对\r\n       */\r\n      // 根据剩余的旧列表创建 key list\r\n      if (!oldKeyToIdx) oldKeyToIdx = createKeyList(oldChild, oldStartIdx, oldEndIdx);\r\n\r\n      // 判断新列表项的 key值 是否存在\r\n      idxInOld = oldKeyToIdx[newStartVNode.key || ''];\r\n      if (!idxInOld) {\r\n        /*\r\n         * 4. 新 key 值在旧列表中不存在\r\n         * 直接将该节点插入\r\n        */\r\n        let newDom = createDomElement(newStartVNode);\r\n        dom.insertBefore(parentElm, newDom, oldStartVNode.domElm);\r\n        triggerHook(newDom.vnode, 'insert');\r\n        newStartVNode = newChild[++newStartIdx];\r\n      } else {\r\n        /*\r\n        * 5. 新 key 在旧列表中存在时\r\n        * 继续判断是否为同类型节点\r\n        */\r\n        elmToMove = oldChild[idxInOld];\r\n        if (isSameVNode(elmToMove, newStartVNode)) {\r\n          /*\r\n          * 6. 新旧节点类型一致\r\n          * key 有效，直接移动并 diff\r\n          */\r\n          dom.insertBefore(parentElm, elmToMove.domElm, oldStartVNode.domElm);\r\n          diff(elmToMove, newStartVNode);\r\n\r\n          // 清空旧列表项\r\n          // 后续的比对可以直接跳过\r\n          oldChild[idxInOld] = undefined;\r\n        } else {\r\n          /*\r\n           * 7. 新旧节点类型不一致\r\n           * key 效，直接创建元素并插入\r\n          */\r\n          let newDom = createDomElement(newStartVNode);\r\n          dom.insertBefore(parentElm, newDom, oldStartVNode.domElm);\r\n          triggerHook(newDom.vnode, 'insert');\r\n        }\r\n        newStartVNode = newChild[++newStartIdx];\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * 8. 当有游标列表为空时，则结束循环，进入策略3\r\n   * 当 旧列表为空 时，则创建并插入新列表中的剩余节点\r\n   * 当 新列表为空 时，则删除旧列表中的剩余节点\r\n  */\r\n  if (oldStartIdx <= oldEndIdx || newStartIdx <= newEndIdx) {\r\n    if (oldStartIdx > oldEndIdx) {\r\n      // 新增节点\r\n      const vnode = newChild[newEndIdx + 1];\r\n      addVNodes(parentElm, vnode, newChild, newStartIdx, newEndIdx);\r\n    } else {\r\n      // 删除节点\r\n      removeVNodes(parentElm, oldChild, oldStartIdx, oldEndIdx);\r\n    }\r\n  }\r\n}\r\n\r\n// 对比两vnode是否是相同的\r\nfunction isSameVNode(oldVNode, newVNode) {\r\n  return oldVNode.key === newVNode.key && oldVNode.type === newVNode.type;\r\n}\r\n\r\n//工具函数 创建key列表\r\nfunction createKeyList(children, start, end) {\r\n  let map = {};\r\n  for (let i = start; i <= end; i++) {\r\n    const {key} = children[i];\r\n    if (key) map[key] = i;\r\n  }\r\n  return map;\r\n}","const defer = fn => {Promise.resolve().then(fn);}; //微任务 不阻塞宏任务（渲染等\r\n\r\nconst updateQueue = [];\r\n\r\n// 队列更新 API\r\nexport function enqueueRender(updater) {\r\n  // 将所有 updater 同步推入更新队列中\r\n  // 为实例添加一个属性 __dirty，标识是否处于待更新状态\r\n  // 初始 和 更新完毕，该值会被置为 false\r\n  // 推入队列时，标记为 true\r\n  if (\r\n    !updater.__dirty &&\r\n    (updater.__dirty = true) &&\r\n    updateQueue.push(updater) === 1\r\n  ) {\r\n    // 异步化冲洗队列\r\n    // 最终只执行一次冲洗\r\n    defer(flushRenderQueue);\r\n  }\r\n}\r\n\r\n// 合并一次循环中多次 updater\r\nfunction flushRenderQueue() {\r\n  if (updateQueue.length) {\r\n    // 排序更新队列\r\n    updateQueue.sort();\r\n\r\n    // 循环队列出栈\r\n\r\n    let curUpdater = updateQueue.pop();\r\n    while (curUpdater) {\r\n\r\n      // 当组件处于 待更新态 时，触发组件更新\r\n      // 如果该组件已经被更新完毕，则该状态为 false\r\n      // 则后续的更新均不再执行\r\n      if (curUpdater.__dirty) {\r\n        // 调用组件自身的更新函数\r\n        curUpdater.__update();\r\n        // 执行 callback\r\n        flushCallback(curUpdater);\r\n      }\r\n      curUpdater = updateQueue.pop();\r\n    }\r\n  }\r\n}\r\n\r\n// 执行缓存在 updater.__setStateCallbacks 上的回调\r\nfunction flushCallback(updater) {\r\n  const callbacks = updater.__setStateCallbacks;\r\n  let cbk;\r\n  if (callbacks && callbacks.length) {\r\n    while (cbk = callbacks.shift()) cbk.call(updater);\r\n  }\r\n}","import {diff} from \"../dom_methods/diff\";\r\nimport {enqueueRender} from \"./update\";\r\n\r\nexport default class Component {\r\n\r\n  // 通过保持三份不同的时期的快照\r\n  // 有利于对组件的状态及属性的管理和追踪\r\n\r\n  // 属性\r\n  // public __prevProps\r\n  // public props = {}\r\n  // public __nextProps\r\n\r\n  // 状态\r\n  // public __prevState\r\n  // public state = {}\r\n  // public __nextState\r\n\r\n  // 储存当前组件渲染出的VNode\r\n  // public __vnode\r\n\r\n  // 储存组件节点\r\n  // public __component\r\n\r\n  __hooks = {\r\n\r\n    // 元素节点 创建时机\r\n    create: () => {},\r\n\r\n    // 元素节点 插入时机，触发 didMount\r\n    insert: () => this.componentDidMount(),\r\n\r\n    // 元素节点 更新之前，触发 getSnapshotBeforeUpdate\r\n    willupdate: (vnode) => {\r\n      this.__snapshot = this.getSnapshotBeforeUpdate(this.__prevProps, this.__prevState);\r\n    },\r\n\r\n    // 元素节点 更新之后， 触发 didUpdate\r\n    update: (oldVNode, vnode) => {\r\n      this.componentDidUpdate(this.__prevProps, this.__prevState, this.__snapshot);\r\n      this.__snapshot = undefined;\r\n    },\r\n\r\n    // 元素节点 卸载之前， 触发 willUnmount\r\n    willremove: (vnode) => this.componentWillUnmount(),\r\n  };\r\n\r\n  //生命周期函数\r\n  getSnapshotBeforeUpdate(prevProps, prevState) { return undefined; }\r\n\r\n  componentDidMount() {}\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) { }\r\n\r\n  componentWillUnmount() { }\r\n\r\n  constructor(props) {\r\n    this.props = props;\r\n    this.__setStateCallbacks = [];\r\n  }\r\n\r\n  render() {\r\n    //由组件实例实现\r\n    return null;\r\n  }\r\n\r\n  __createVNode() {\r\n    // 该方法用于封装重新执行 render 的逻辑\r\n\r\n    // state 与 props 状态变更的逻辑\r\n    this.__prevProps = this.props;\r\n    this.__prevState = this.state;\r\n\r\n    this.props = this.__nextProps;\r\n    this.state = this.__nextState;\r\n\r\n    this.__nextState = undefined;\r\n    this.__nextProps = undefined;\r\n\r\n    // 重新执行 render 生成 VNode\r\n    this.__vnode = this.render();\r\n\r\n    //绑定生命周期\r\n    this.__vnode.hooks = this.__hooks;\r\n\r\n    return this.__vnode;\r\n  }\r\n\r\n  //更新state\r\n  setState(operater, callback) {\r\n    // 合并状态, 暂存于即将更新态中\r\n    if (typeof operater === 'function') operater = operater(this.state, this.props);\r\n\r\n    //setState帮你合并\r\n\r\n    this.__nextState = {\r\n      ...this.state,\r\n      ...operater,\r\n    };\r\n\r\n    // 调用更新，并执行回调\r\n    callback && this.__setStateCallbacks.push(callback);\r\n\r\n    //值有改变才render\r\n    if (!deepEqual(this.state, this.__nextState))\r\n      enqueueRender(this);\r\n  }\r\n\r\n  //更新状态，调用diff\r\n  __update() {\r\n\r\n    // 临时存储 旧虚拟节点 (oldVNode)\r\n    const oldVNode = this.__vnode;\r\n\r\n    this.__nextProps = this.props;\r\n    if (!this.__nextState) this.__nextState = this.state;\r\n\r\n    // 重新生成 新虚拟节点(newVNode)\r\n    this.__vnode = this.__createVNode();\r\n\r\n    // 调用 diff，更新 VNode\r\n    diff(oldVNode, this.__vnode);\r\n\r\n    this.__dirty = false;\r\n  };\r\n}\r\n\r\nfunction deepEqual(object1, object2) {\r\n  const keys1 = Object.keys(object1);\r\n  const keys2 = Object.keys(object2);\r\n\r\n  if (keys1.length !== keys2.length) {\r\n    return false;\r\n  }\r\n\r\n  for (let index = 0; index < keys1.length; index++) {\r\n    const val1 = object1[keys1[index]];\r\n    const val2 = object2[keys2[index]];\r\n    const areObjects = isObject(val1) && isObject(val2);\r\n    if (areObjects && !deepEqual(val1, val2) ||\r\n      !areObjects && val1 !== val2) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\nfunction isObject(object) {\r\n  return object != null && typeof object === 'object';\r\n}","import createElement from \"./main_methods/createElement\";\r\nimport Component from \"./main_methods/Component\";\r\n\r\nconst SmpReact = {\r\n  createElement,\r\n  Component\r\n};\r\n\r\nexport default SmpReact;","import render from \"./dom_methods/render\";\r\n\r\nconst SmpReactDom = {\r\n  render,\r\n};\r\n\r\nexport default SmpReactDom;","import SmpReact from \"../../SmpReact/SmpReact\";\r\nimport imgsrc from \"../../assets/gamepad.png\";\r\nimport \"./style.css\";\r\n\r\nexport default class Header extends SmpReact.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <header className=\"wrapper\">\r\n        <div class=\"box\">\r\n          <img className=\"logo\" src={imgsrc} alt=\"\"/>\r\n          <div class=\"textWrapper\">\r\n            <div className=\"title\">Counter-Demo</div>\r\n            <div className=\"tips\">powered by SmpReact</div>\r\n          </div>\r\n        </div>\r\n        <div className=\"buttons\">\r\n          <div className={this.props.page === 0 ? 'title active' : 'title'}\r\n               onClick={() => this.props.setPage(0)}>Counter\r\n          </div>\r\n          <div className={this.props.page === 1 ? 'title active' : 'title'}\r\n               onClick={() => this.props.setPage(1)}>TodoList\r\n          </div>\r\n        </div>\r\n      </header>\r\n    );\r\n  }\r\n}","import SmpReact from \"../../SmpReact/SmpReact\";\r\nimport \"./style.css\";\r\n\r\nexport default class Footer extends SmpReact.Component {\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <footer>\r\n        <div className=\"txt\">Oliver-ysq</div>\r\n        <div className=\"txt\"><a target=\"_blank\" href=\"https://github.com/Oliver-Ysq\">https://github.com/Oliver-Ysq</a>\r\n        </div>\r\n      </footer>);\r\n  }\r\n}","import SmpReact from \"../../SmpReact/SmpReact\";\r\nimport \"./style.css\";\r\n\r\nlet interval;\r\n\r\nexport default class Counter extends SmpReact.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      canIclick: true,\r\n      disabled: false,\r\n      x: 0\r\n    };\r\n    this.calc = this.calc.bind(this);\r\n    this.setInterval = this.setInterval.bind(this);\r\n    this.clearInterval = this.clearInterval.bind(this);\r\n  }\r\n\r\n  calc(e) {\r\n    if (!this.state.canIclick) return;\r\n    switch (parseInt(e.target.id)) {\r\n      case 1:\r\n        this.props.setN(this.props.n + 1);\r\n        break;\r\n      case 2:\r\n        this.props.setN(this.props.n - 1);\r\n        break;\r\n      case 3:\r\n        this.props.setN(this.props.n * 2);\r\n        break;\r\n      case 4:\r\n        this.props.setN(0);\r\n        break;\r\n      default:\r\n        throw new Error();\r\n    }\r\n  };\r\n\r\n  clearInterval() {\r\n    if (!this.state.canIclick) {\r\n      clearInterval(interval);\r\n      console.log(\"定时器已关闭\");\r\n    }\r\n    this.setState({\r\n      canIclick: true,\r\n      disabled: false\r\n    });\r\n  };\r\n\r\n  setInterval() {\r\n    if (!this.state.canIclick) return false;\r\n    const that = this;\r\n    interval = setInterval(() => {\r\n      that.props.setN(that.props.n + 1);\r\n    }, 1000);\r\n    this.setState({\r\n      disabled: true,\r\n      canIclick: false\r\n    });\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    console.log('Counter update');\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"listWrapper\">\r\n        <div className=\"display\">{this.props.n}</div>\r\n        <div className=\"btnWrapper\">\r\n          <div>\r\n            <button className={this.state.disabled && 'ban'} id={1} onClick={this.calc}>+1</button>\r\n            <button className={this.state.disabled && 'ban'} id={2} onClick={this.calc}>-1</button>\r\n            <button className={this.state.disabled && 'ban'} id={3} onClick={this.calc}>×2</button>\r\n            <button className={this.state.disabled && 'ban'} id={4} onClick={this.calc}>clear</button>\r\n          </div>\r\n          <div class=\"secondLine\">\r\n            <button onClick={this.setInterval}>setInterval</button>\r\n            <button onClick={this.clearInterval}>clearInterval</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}","import SmpReact from \"../../SmpReact/SmpReact\";\r\nimport \"./style.css\"\r\n\r\nexport default class TodoList extends SmpReact.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"listWrapper\">\r\n        {this.props.list.map(v=><div>{v.content}</div>)}\r\n      </div>\r\n    );\r\n  }\r\n}","import SmpReact from \"./src/SmpReact/SmpReact\";\r\nimport \"./App.css\";\r\nimport Header from \"./src/components/Header/Header\";\r\nimport Footer from \"./src/components/Footer/Footer\";\r\nimport Counter from \"./src/components/Counter/Counter\";\r\nimport TodoList from \"./src/components/TodoList/TodoList\";\r\n\r\nexport default class App extends SmpReact.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      n: 0,\r\n      list: [{content: \"汽车\", done: false}, {content: \"写作业\", done: false}],\r\n      page: 0,\r\n    };\r\n\r\n    this.setN = (newN) => {\r\n      this.setState({n: newN});\r\n    };\r\n\r\n    this.setPage = (newPage) => {\r\n      this.setState({page: newPage});\r\n    };\r\n\r\n  };\r\n\r\n  componentDidMount() {\r\n    console.log('App mount');\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"page\">\r\n        <Header setPage={(n) => this.setPage(n)} page={this.state.page}/>\r\n        <main>\r\n          <Counter className={this.state.page === 1 ? 'none' : ''} setN={(n) => {this.setN(n);}} n={this.state.n}/>\r\n          <TodoList className={this.state.page === 0 ? 'none' : ''} list={this.state.list}/>\r\n        </main>\r\n        <Footer/>\r\n      </div>\r\n    );\r\n  }\r\n}","import SmpReact from \"./src/SmpReact/SmpReact\";\r\nimport SmpReactDom from \"./src/SmpReact/SmpReactDom\";\r\nimport App from \"./App\";\r\n\r\nSmpReactDom.render(<App/>,\r\n  document.getElementById(\"root\"));","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}