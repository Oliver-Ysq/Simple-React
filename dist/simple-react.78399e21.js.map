{"version":3,"sources":["src/SmpReact/main_methods/createElement.js","src/SmpReact/utils/dom.js","src/SmpReact/dom_methods/render.js","src/SmpReact/dom_methods/diff.js","src/SmpReact/main_methods/update.js","src/SmpReact/main_methods/Component.js","src/SmpReact/SmpReact.js","src/SmpReact/SmpReactDom.js","src/components/Header/Header.jsx","src/components/Footer/Footer.jsx","src/components/Counter/Counter.jsx","App.jsx","index.jsx","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["createVNode","type","props","ref","key","children","domElm","text","createElement","tag","elementName","data","attributes","length","i","child","includes","undefined","String","dom","vnode","document","createTextNode","setTextContent","content","nodeValue","getParentNode","elm","parentNode","appendChild","parent","Array","isArray","item","removeChild","getNextSibling","nextSibling","insertBefore","newNode","refNode","insertAfter","before","lastChild","addClass","className","classList","add","bindEvent","fn","addEventListener","removeEvent","removeEventListener","setAttr","value","setAttribute","removeAttr","removeAttribute","createDomElement","list","push","renderComponent","setDomProps","keys","Object","startsWith","eventName","substring","toLowerCase","console","log","compVNode","Comp","instance","prototype","render","__nextProps","__nextState","state","__createVNode","__component","component","parentDom","diff","oldVNode","newVNode","isSameVNode","diffComponent","diffVNode","replaceVNode","oldCompVNode","newCompVNode","nextProps","__dirty","oldChild","oldText","oldProps","newChild","newText","newProps","diffProps","hasOldChild","Boolean","hasNewChild","diffChildren","addVNodes","removeVNodes","oldDomElm","newDomElm","oldV","newV","start","end","newDom","parentElm","oldStartIdx","newStartIdx","oldEndIdx","newEndIdx","oldStartVNode","oldEndVNode","newStartVNode","newEndVNode","oldKeyToIdx","idxInOld","elmToMove","createKeyList","map","defer","Promise","resolve","then","updateQueue","enqueueRender","updater","flushRenderQueue","sort","curUpdater","pop","__update","flushCallback","callbacks","__setStateCallbacks","cbk","shift","call","Component","__prevProps","__prevState","__vnode","operater","callback","SmpReact","SmpReactDom","Footer","imgsrc","Counter","n","disabled","minus","mult","clear","setInterval","clearInterval","App","interval","flag","calc","setState","Error","that","window","alert","getElementById","bundleURL","getBundleURLCached","getBundleURL","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","split","Date","now","cssTimeout","reloadCSS","setTimeout","links","querySelectorAll","module"],"mappings":"AaAA,ACAA,IDAI6K,ACAAW,MAAM,GDAG,ACAAC,GDAG,IAAhB,ACAoB,CAAC,cAAD,CAApB;;AFAA,ACCA,ACCA,SDDSX,ACCAY,UAAT,CAAoBC,IAApB,EAA0B,CDD1B,GAA8B;AAC5B,ACCA,MDDI,ACCAC,CDDCf,MCCM,GDDX,ACCcc,EDDE,ECCE,CAACE,SAAL,EAAd;AFFF,ACEIhB,IAAAA,SAAS,GAAGE,YAAY,EAAxB;AACD,ACADa,EAAAA,OAAO,CAACE,MAAR,GAAiB,YAAY;AFF/B,AEGIH,IAAAA,IAAI,CAACI,MAAL;AHLJ,AEME,ACAC,ARNH,ACAA,AJAA,AEAA,ADAA,AMAA,ADAA,ADAA,GMIE,CVJIhE,KSMG8C,ATNE,GAAG,MSMZ,GTNI9C,KAAQ,CAAA/E,EAAE,EAAI;ASOnB,ATPoBgF,EAAAA,OAAO,CAACC,OAAR,GAAkBC,IAAlB,CAAuBlF,EAAvB;AOCrB,AGME4I,ARNF,AHAA,AEAA,ADDiD,AMCjD,ADAA,ADAA,CJDA,CUOEA,CVPiD,MUO1C,CAACI,IAAR,GAAeL,IAAI,CAACK,IAAL,CAAUC,KAAV,CAAgB,GAAhB,EAAqB,CAArB,IAA0B,GAA1B,GAAgCC,IAAI,CAACC,GAAL,EAA/C;AFHF3C,ACKA,ACDEmC,AZRF,EYQEA,IAAI,CAAC/J,EDCEmJ,QCDP,CAAgB1I,GFJNqC,ACKZ,GAAwB,GDLxB,GEIE,CAA6BkH,OAA7B,EAAsCD,IAAI,CAACvJ,WAA3C;AHNF,ACEA,ACME,ACDD,APPD,ACAA,IDAMoH,WAAW,GAAG;AKEpB,ACOE,ANRA9E,APHF,AIEA,EGCEA,EHDIyD,ESSA,ENRE,EAANzD,KHDe,GAAG,EAApB,EAEA;AODA,ACCA,ACQI,ACDJ,ARRA,ACDoB,APDb,COCP,GOSI0H,ARRE7C,KNFUvJ,CaWN,EPTI,EOSAwK,ACDA,CRRG,EQQA,EDCP,CbXH,CaWH,ACDJ,AdV4BvK,IAArB,EAA2BC,KAA3B,EAAkCC,GAAlC,EAAuCC,GAAvC,EAA4CC,QAA5C,EAAsDC,MAAtD,EAA8DC,IAA9D,EAAoE;AYG3E,ACSG,APTDC,ANFA,AIGK,EEDLA,COOA,CDNAa,ACQE,KbXK,AIGO+G,ESQL4C,CDRD,CAACJ,CCQP,CPTW,ACEApB,CMOC,CPTdhJ,KFCK,CAAuB6H,IQA5B,CAAwB,ERAnB,EAAgC,EQArC,CADF,INDiB;AKCjB,AEUI,ACFJ,ARPEY,AHFF,AHAIhJ,AIGF,AHNF,EKKEgJ,ENFEhJ,IaWIgL,AbXA,CcSCoB,CdTLpM,CMEO,EAATgJ,CNHO,CaYM,GAAG,ACFlB,CDEmB,ECFE,GDEG+B,GAAG,CAACE,KAAV,EAAiBC,KAAjB,CAAuB,+DAAvB,CAAd;ACDF,ARVe,AHCV,ADFP,AFCU,AIIR,AHNF,CKEA,KQUMiB,GXTUlH,IAAT,CAAcC,EWSnB,EAAgB,IXTX,EAAwBC,QAAxB,EAAkC;AUWrC,ACDA,AXTF,ADFK,AFCHlF,AIIF,AHNF,IDEIA,EGCEmF,EUUE4F,CXZQxH,AFCP,EAALvD,IaWA,APPWqJ,CNNN,CaaQ,AVVA,CAACpE,ODFX,CCEU,ADFgB/D,ECELgE,GDFrB,EAAiC,GCEvB,CAAf,EAAqC;AUWjC,ACDH,AXTC,ADFF,AFAU,AIKV,AHLF,IAAMjE,GAAG,CEED,EFFI,GYYCiK,EVVEjG,QUUQ,AVVA,CUUC8F,AVVAhL,IAAhB,GUUuB,CAAC,CAAD,AVVE,CUUV,CAAjB,QVVF,EAAyC;AUWxC,AVVC,ADFJ,AFAEI,AIKF,AHLA,IIFmB4I,ALEjB5I,EIMA,CAACgI,KJNO,EAARhI,AIMQ,CAACuF,OJTJ,AISL,KACCyC,OAAO,CAACzC,OAAR,GAAkB,IADnB,KAEAuC,WAAW,CAACxE,IAAZ,CAAiB0E,OAAjB,MAA8B,CAHhC,EAIE;ASID,ACDD+D,AXTI9G,ADDJ,AGFA,ALAY,AIUV,AHTF9E,EaWA4L,AbXA5L,IEEI8E,ADDAvD,KAAK,CYUC,AZVAC,GYUGsK,AbbH,IEIO,ADDb,CCCcnH,ADDA/D,KYUK,AZVnB,CYUoB,AZVxB,ECCiB,ADDS,ECCEgE,QWSQ,AXTnB,CAAb,CFFUhE,KAFJ,EAEW;AaYnB,AXTC,ADDD,AGFF,ALAEjB,AIUA,AHTA,IDDAA,CGAA,EHAG,CcYCoM,CdZJpM,EGGO,AFFAkB,CDLF,CcgBI,GAAGA,GbXG,CAACb,IaWI,CAACgM,QbXd,CAAuBpL,KAAK,CAACnB,CaWxB,CAA0B,EbX/B,CAAP,qBaWY,CAAZ;ADEF,AVVI,ADAF,AGFF,ALFQ,AIWN8H,AHTD,GAJS,CGaRA,IFPIrE,CWUC,ATHA,CAAC4E,ESGR,AXVU,GAAG,EAAX,SEOK,CAAL;ASIH,ACFG,AXRE/C,AEFJ,ALFEnF,AIWD,AHRD,IDHEA,EGIEmF,CHJC,EcYE,AdZLnF,GALK,CciBIU,CAAC,CXRC,CAACqE,CWQC,CAAb,EAAgBrE,CAAC,GAAGyL,AXRT,EAAWnH,GWQG,CAACvE,IXRf,CAAT,CWQF,EAAkCC,CAAC,EAAnC,EAAuC;AACrC,AXRD,ADDD,AGDF,ALHQ,AIYT,AHRCQ,EGUF,AHVEA,OCAO,CYSCkK,GZTG1K,CAAC,EYSE,AbhBJ,CagBKsK,AZTA,CAAb,EAAgBtK,CAAC,GAAGM,GYSd,CAAkBmL,CZTC,CAAC1L,GYSG,CAACC,CAAD,CAAL,AZTxB,CYSiCkL,CZTClL,CAAC,EYS7B,AZTN,CDAaP,IAPL,CagBmCiL,CbTxB,KaS8B,CAACT,YAAP,EAAzC,EAAgE;ADGtE,ACFQW,AXRL,ADDGhI,AGDJ,ALHEpD,ACIA,GEPF,CHGEA,EEIEoD,EYSEgI,CDECN,AVVA,CDDC,AFJA,CEICzH,ADAAtC,CDJPf,GEIE,CAAUmD,EYSE,AdnBT,CaqBT,ACFmB8I,AbTA,CYWClB,AZXA/J,GYWpB,CCFwB,CDEC,ACFAR,CAAD,CAAN,CAAV,IZTwB,CAACM,CDAtB,CAAwBb,GCAG,CAACO,ADA5B,CCA2B,ADAlC,CCA4B,CAA1B;AWYJ,ACFK,AXRHsD,ADHA,AGEF,ALLW,ACKV,GATS,CEURA,KUUK,CAAC,CVVC,CAACC,GUUGgH,AVVX,CAAY,EUUP,EAAWC,OAAX,CAAmB,IVVxB,kEUUK,EAA2F,IAA3F,IAAmG,GAA1G;AACD,ACFI,AXRD9F,AEDF,ALLEjF,AIaJ,AHPE,IEAEiF,AHNAjF,IAAI,CIaC+H,CJbL/H,IAPK,CAOC,CGMM,CAAC4E,QAAD,ACOhB,EDP2BC,CCOC,ODPZ,CAAZ;AACD,ADHC,AGEF,ADQA,AHPA7D,EAAAA,IGOI4G,KFVKzE,IAAP,CDTQ,CGmBK,CAAC7C,MAAhB,EAAwB,gBHPTP,MAZL,EAYakB,OAZb,EAYsB;AYWlC+J,ACFIa,AXRH,ADFE,AGCD,ALdO,AIsBL,AHPA,EEEJ,CDZE,AFLA,CcuBEA,GDEG,CAACrB,AZVAzK,CCFC,KYUK,AbRA,GaQG,CbRC,CAAC,CYUnB,CCFI,EDEmBwK,IZVL,EAAW,QAAX,EAAqB9J,EYUvC,MZVkB,SAAqCQ,OAArC,EAAd,EAA6D;AYWjE+J,ACFG,AZVC,AGEF,ALPD,AIcGpD,AHPE7H,GaDmB,CVQrB6H,CUCC,CbRC7H,CYUC,ACXkB,CDWjB8K,ACXN,AZDM,IDEI,CAAC3J,ECFEL,AESA,CAACmH,ESGhB,EXZoB,AEShB,CSGiB6C,AXZAnL,CDEf,CGKoB,CAItB,CFXI,ADEiBuB,KCFK,CWY9B,CZVM,QCFF,EAAsC;AYWzC,AZVK,AGEJ,AJAG;AECL,ADFMJ,AGGJ,ALRa,AIeX,AHRD,GAhBS,GCcNA,EEUEoH,CDRClD,AHPe9E,EEKb,GAAGoD,IEUI,GAAGuE,CDRrB,AHPe,CGOQ1C,AHPehF,GAAvB,EAA4B,CEKd,CAACW,EEUE,CAACqH,EDRjC,ADF6B,CAAvB,AEUe,CDRgB/C,CCQjC,WDRJ,EAAmD;AWSnD+G,AXTmD,ADD9C,AGGH,ALTyC,ACSzC,MaOI,AXRGjI,AHPavE,CcefsL,GdhBoC,GACe9K,Cce1D,AXTmD,EHPR,CcgB1B4L,AXR0B5G,AHPlC/E,SceT,EdhB2C,CGOQ,CAC1C8D,QAD0C;AAAA,AEIjD,ALXyC,AIgBvC,AHNF9C,EAAAA,IEFwByD,AHPcxE,IADG,CIgBhC6H,EJf+C/H,CGMP,CFhBvC,CDS+B,CGQAgF,AHPf7E,IKUdV,ADKV,EAAmB,GCLrB,CLXyC,CKWtB,CFJ8B,CAChCkB,KADgC,KFGnCO,GAnBJ,EAmBS;AEH8B,ADL1C,AGSY,ALXsB,AIkBrC,AHPF,ISrBiBgI,ADAAF,ENkBe9H,AHPUtB,GGMK,EFIxCsB,CEHgC8D,EHRA,ACW7B,GCJ4BrE,AFNgBX,CCUxCkB,EDXyB,CACGtB,ACUzB,CCTZ,ADSauB,EEJ6B,CACfD,GADe,CHPR,GCWvC;AEJ+C,ADL1C,AEiBH,AHPH,GArBS,GEkBIgE,EDFLtF,OCAwC,CDL1C,ECOoBqF,QDFlBrF,ICAwC,CAE1CH,GDPA,ECK0C;ADL1C,AGUL,ALZuC,AIoBrC,AHNJ,IOvBmBuJ,ERWZrJ,EEKYH,CGKZC,ALZkC,GEElC,AFAsBS,EKU3B,ELZuC,CKY1BT,ALVRE,GAFkC,EEOtBH,AGKjB,IHVK;ACSP,ADTO,AGWL,ALbuC,AIqBrC,AHNJ4B,EAAAA,IEJI2C,AHTQrE,EEKaI,CGMlBsI,ALbkC,CIqBjCL,EFnBD,AFAsB7H,CCXnB,CEoBE,EHX6B,CAE7BR,CGSIgF,EHXyB,AIqBvB,CAACS,CFdMrF,ICIzB,ADTO,ECSmB,AEExB,ADQE,EAAwB,CCRC,EAA3B,GJEUuB,MAxBF,EAwBUf,KAxBV,EAwBiB;AEHzByD,ADVK,AGYN,ALdwC,AIsBnC,AHNJ,IEJAA,EHVkBtE,EEKWA,GFPU,CGY/B,CAAC0F,ADVJ,OCUL,GAAmB,ADLU1F,KCK7B,ADVK,CCSmB,CAGxB,SHZ2BS,IAFY,mBAIzC;AImBM6H,AHNJ,AS1BF,ADAA,QLgCMA,AHNAzG,KAAK,CAACC,IGMI,CAAC0G,AMhCLxI,CDAE,CR0BR,CAAca,ES1BpB,EAAmB,CNgCb,AHNA,CAAJ,EGI0B,AHJA,CGQtB;ADVJyD,ADPA,ADS0B,AS1BT,ADAL,IEEK2F,ARsBjB3F,IDPIvE,ICOI,ADPA,CCOC0E,GDPG,OAAO1E,CCOnB,GAAuB0F,ADPX,KAAgB,ICO5B,IDPA,EAAsC,ODUnB5E,KADO;AED1B,ADPE,AFJJ,ACY4B,AOzB5B,MRaIV,EGWE,CAACmE,KHXK,GGWG,CAACI,AHXAvE,EQbF,MRaU,CAACQ,EGWvB,EAA2B2D,EHX7B,EAAiC,IGWI,CAACI,WAAT,GAAuBJ,QAAQ,CAACK,KAAhC,CALH,CAOxB;ADREzD,AFJF,AIoBIuH,AMnCa,ADAL,ADCA,MNkBVvH,EFJIP,AIoBF8H,GFhBG,CAACrI,EFJI,GAAGD,CEIb,GAAec,AEgBA,CAACqH,GJpBK,CAAC3H,GKUjB,AKxBDX,GVcN,AIoBiB,CAAb,CFhBiBM,AQnBJ,aRmBA,CAAkBY,KAAlB,CAAf,CAFoC,CAEI;ACS1CsE,AEFA,ADUG,AHVuB,ASxB3B,ADAA,IN0BCA,GCHmB,CAYjB,QDTU,CAAClB,QAAb,GAAwBA,QAAxB;AACAkB,ADTE,AGOF,ALXA,ACWE,AO1BU,IL4BZA,KHbK,CEIC3D,GGOC,ALXEjB,CAAC,CEIC,CCSC,ADTAkB,CCSCL,AEFb,ALXa,CAAb,EGaA,AHbgBb,CAAC,EGaEa,ADTb,CAActB,AFJAQ,EGapB,CATwB,CAWxB,EHfA,EEIM,AFJsBC,CEI1B,AFJ2B,EEIE,AFJ/B,EAAiC,uBCWP;AUxB5B,AR6BE,ADXI,AGOL,ALXG,ACUwB,AOxB3B,URcSC,ICUGkB,CDVE,EWdD,CXcI5B,ACUU,QDVF,CAACS,CAAD,CAAtB,CAD+B,CACH;AWdlB,ATmBR,AEgBF0H,AHVE1G,MGUF0G,IHVE1G,GCNK,GEgBG,AHVF,CCNGhB,ADMFe,ECNG,AEgBCsG,GFhBE,CAAb,EAAgBrH,EAAC,CDMjB,CAAmBmB,CCNC5B,AEgBE,CAACoI,EHVvB,CGUW,EAAb,EFhB8B,CAAC5H,MAA7B,EAAqCC,EAAC,EAAtC,EAA0C;ACW9C,ADVMK,AFLJ,AIqBD,AHVE,QEIGiE,EHfA,CAAC,KGeO,GAAG,AHfX,EAAW,EEKPvD,MFLJ,AUdC,ADAA,ETcoBb,GEKrB,CAAgBI,IFLhB,CEKqB,CAACd,MAAtB,CCU2BoF,AHfU3E,CEKP0C,IFL9B,EAAJ,EAAiD,GGelC,CAAjB,CAbwB,CAexB,EDZoD,CAACpD,QAAQ,CAACS,EAAD,CAAT,CAA9C;ASpBM,ATqBP,AFLD,AIqBL,AHd2B,AStBnB,ADCP,oCJyBc;AFMdoE,ADXG,AGMH,ALXI7E,AIqBP,AHf6B,AQrB1B,ELsCJ,EDPI6E,IAAI,AHhBA7E,CGgBC8E,OHhBO,CGgBR,AHhBSrE,CAAD,CGgBGsE,AHhBX,GAAcpF,KGgBd,CAAJ,CK/BO,IResB,CACvBiB,SADuB,EAEvB,EAFuB,EAGvBA,SAHuB,EAIvBA,SAJuB,EAKvBA,SALuB,EAMvBA,SANuB,EAOvBC,MAAM,CAACb,QAAQ,CAACS,CAAD,CAAT,CAPiB,CAAzB;AWhBJ,ARiCD,ADXE,AGOD,ALJG,ACHuB,ASrB1B,ADAA,ADCA,KNWA,MASO,IAAI,CAACb,IAAI,KAAKgB,SAAT,IAAsBhB,IAAI,KAAK,IAAhC,KAAyCM,IAA7C,EAAmD;ASrB1D,ARiCH,ADXK,AGOF,ALJC,ACJyB,ASrB1B,ADAA,ADCA,ELkCJ,QQnCSsE,CN6BAqE,IM7BL,GAAa,IN6Bb,GAAmB,KAAKhJ,KAAxB;AM5BE0J,ATsBAxI,AGOF,ALJD,AIaH,AHlB8B,ASrB1B,ADAA,ADCA,MGAEwI,ATsBAxI,CStBC,EAAE,APsCAuH,COvCQ,CTuBN,AGOFQ,CHPG7I,MAAN,GAAea,CGOjB,ADSJ,CAAuBkH,ECTA,KAAKxD,ADS5B,EAAgC,EFhBPvD,CGOrB,aHPiB,CAAmBf,IAAnB,CAAf;ASrBA6J,ATsBD,AGQD,ADQF,AHfG,ASzBD,ADAA,ADCA,KPoBA,CUnBEA,APsCExB,KCRC1I,AJPE,GUvBG,CPsCG,COtCD,AN8BZ,EDQgBmI,CCRH,CMhCA,CDCI,AFCG,GH8BF1D,CDQK,CAACkE,SCRxB,UDQF;AOrCIwB,ARiCN,AEHI,ALNF,AIcA,AHfIvI,AS1BF,ADAA,ADCA,MGEEuI,APsCAvB,AHfAhH,GEUGyD,AHTAvF,AIcP,COtCQ,CN8BD6E,CM9BG,AVuBA,CAAChD,GU1BI,ANiCb,EFGJ,CAAmBsD,AEHF,CLNG,CAAClF,ESzBE,CJ+BD2E,AJPhB,CDCc,ACDK7D,EEUzB,AHT2Bb,EGSEkF,CFVvB,EDCc,EAAcjF,CKM9B,EFGJ,AHToB,EGSmB,AHTAC,GAAnB,EAAwBC,QAAxB,EAAkCY,SAAlC,EAA6CA,SAA7C,CAAlB;AWvBI4I,ARgCiC,ADVnC,AGSA,ALPH,ACDI,AS3BD,ADAA,ADCA,MGGEA,ARkCGvJ,EDZDc,GGSCwD,CFC8B,CDV1B,CStBC,ATsBAtE,CCYyD6E,CQlCvD,ITsBZ,EAAkB,AGSlB,CFCmC,CAE9B7E,CEHcW,KFCgB,IEDnC;AMnCa,ARoCsB,ADVhB,AGUnB,ADMF,AHdC,AS5BC,ADAA,ADCA,GPNQ,EUKR,CRsCuB4E,ACIrB+C,KCNGjE,GFA8B,CCMxB,EDJwDQ,ECIpDyD,GCNf,GFAmC,AEAhB3H,CFENZ,ECIW,CAACQ,KDNU,AEAnC,CAXc,ADiBhB,CCJE,CDIiC;ADNE,ADTjCgD,AEgBF,AHbF,AS9BE,ADAA,ADCA,MLqCuCiC,ADXrCjC,KEgBKiF,EDP4B,CCOzB,EDLyD3D,CDXtD,AEgBAyD,CFhBCxH,KAAK,CCSgB,ADTfd,CCWaC,CCKX,CAACwI,EDPY,CDTtB,EAAe7I,AEgBf,EAAb,GFhBa,CAAX;ASpBF,AR6BmC,ADRjC,AGWF,ADIgC4I,AHZlC5G,AS/BE,ADAA,ADCA,EP8BFA,IEOyD6D,ACKvB+C,GAAG,COpC9BwB,APoC+BtB,CCJ/BI,EHXIhI,ADjCD,CUYR,AR6BmC,ACOH,CAASiH,EOpC7B,AR+BuDlD,CDVrD,AGWd,CHXe7E,AMzBA,EHoCA,CDIiB,CMzCb,EPkCgB,ADRjC,CCU8CJ,AEC5BwE,CMhCPzE,IAAD,AR6BuB,CEGpB,CMhCO,CNgCtB,EJRU6B,MApCF,EAoCUf,KApCV,EAoCiB;AUvBvB,AR4BiC,ADPlC,AGWD,ADGA,AHXA,AShCA,ADAA,ADCA,KNyBA,CCaeiF,EFPXjF,GCHG,EGWA,AJRE,CUxBCd,AR4ByB,GAGwBmF,AFP9CtD,CUxBX,ANgCUsH,KJRR,EEI+B,AEInC,CFDK/I,CFPkBU,KAAK,CAACa,CEIM,SFJnC,EAAyC;AUvBrC,AR2B+B,ADPzB,AGYX,ADGA,AHXGE,ASjCF,ADAA,ADCA,MLsC+BmE,AEIjC,AJVInE,MAAM,CUxBC,AR2B0B,AFH1BI,CUxBL,ER8BuDkD,KOrC7B,EDCX,CNiCgB,AFHjC,CEMuB7E,AFNJQ,CS/Bcb,GPkCA,CFHjC,CS/B4B,CAAW0J,CAFzC;ACUM,AR0B6B,ADNjC,AEeL,AHXI,ASlCD,ADAA,ADCA,MLsC+C1D,ODTtCzC,CCM0B,EQ1BxB8G,CR6BgDnF,OQ7BrD,CAAc,AR0Be,CAGKlF,GDTf,CAACkB,CCMS,IDNV,CAAvB;ASpBmBwI,AR+BvB,ADVG,ADIF,ASnCC,ADAA,ADCA,GPNQ,GE8CNzE,MQ/BmByE,CAAC,CR+BZ,CQ/Bc,IR+BTxE,EQ/BcP,KAAL,CAAW+E,AR+BjC,CQ/BsB,GAAe,AR+BZ,CAACtJ,MAA9B,EAAsC,OALD,CAOrC;AQjCsB,ATsBrB,ADKD,ASrCE,ADAA,ADCA,WGSM,cHNe,MAHrB;AL2CF8E,ADXD,ADKCjD,AStCE,ADAA,ADCA,EL2CFiD,ADTF,ADGEjD,QEMQ,CAAC7B,KFjDC,CEiDV,EKxCmCoJ,CLwCjBpJ,GOzCG,GPyCrB,CARqC,CAUrC,CEFS+I,MG3CP,IH2CiBC,GJNJhJ,MA3CL,CIiDmB,CJNN;AU3Bf,ANkCN,AJNA,ASvCA,ADAA,ADCA,WPsCOA,MAAM,CAAC8B,COnC+B,GCDV,ORoC5B,CQvCP,IRuC8B,IAAvB,GAA8B,KAA9B,GAAsC9B,MAAM,CAAC8B,WAApD;AEQF+D,AEDE,AJND,ASxCC,ADAA,ADCA,EL8CFA,CFpDU,OImDJ,CFCG,CAAC7F,KEDG+I,CFCJ,EAAStD,AM5CiC,KJ2C7C,GFCG,EAAmBG,AEDF,QFCjB,CAAT,CEDE,EAAoC;AMlChC,ARqCN,ADbK,AGWDmD,AJLJ,AS1CE,ADAA,ADCA,MLgDIjD,EEFFiD,CHXUxF,ISxBH,CAAL,ENmCM,CFEK,EEFFwF,CFEKhD,ADbf,CAAqB/F,MCaC,ADbtB,AGWkB,CFEKuF,AEFJ,CHXU3F,IGWL2E,CHXxB,ECa+B,ADbK,EGWlB,EFEiBgB,AEFJ,KAAK3F,GFEO,CAACW,CEF1B,CAAnB,IFEuB,CAA3B;AQpCQ,ARqCR,ADbA,AGWG,AJLHwB,AS3CE,ADAA,ADCA,EP0CFA,IEOMiE,ADbFhG,CGOyB,CAM3B,IHbQ,ED1CA,EUkBGiK,ATwBC,CCaG,GAAGlE,IQrCZ,ATwBanG,CSxBC,ERqCK,CAAC8F,CDbd,MAAiB,CCaK,EFPvBlE,EEO2BkE,GDbxC,CD1CU,CC0C+B,CDMpB1D,EEO2B,CAACzB,IFvDvC,EEuDiB,AFPG0B,CEO9B,MFvDU,EAgD6B;AU9BhBqH,ATyBrB,ADMA,AS5CA,ADAA,ADCA,QNqCM9F,ADMFvB,IU/BiBqH,ATyBX,CSzBY,EAAE,ATyBX7F,ADMb,EAAa,IU/BgBc,ATyBV,CAACf,ISzBI,ATyBX,CSzBsB8F,ATyBV1J,CSzBD,GAAe,CTyB1B,CAAb;ASzBoB,ARuCtB,AFPI4B,AS7CF,ADAA,ADCA,MLmDEmE,AFPAnE,KUhCI,CVgCE,CEOC,AFPAO,KEOKpB,OFPZ,CAAoBqB,CEOxB,EAA2B,IFPvB,EAA6BC,OAA7B;AEQF,ADdA,AGYA,AJLC,AS9CD,ADAA,ADCA,KP2CA,ICLK,EGYAqC,AJLE,ECPE9D,CAAC,GAAG,CAAb,EAAgBA,CAAC,AMlCA,CH8CjB,EHZoBgD,IAAI,CAACjD,MAAzB,EAAiCC,CAAC,AGa7B,EHbL,EAAsC,CGa5B+D,KADV,EAEKwE,QAFL,EAP2B,CAY3B;AM1CM,ARwCNlI,ADbE,ADMAA,AS/CF,ADMD,ADLC,MP8CEA,GAAG,CCNGf,ADMFyB,GCNK,GAAGiC,CCaVvC,GDbc,CAACT,ADMjB,CCNgB,ADMAgB,CCNhB,IQpCyB,CT0CzB,EAAwBQ,CEO1B,CAAmBhC,AOjDaJ,KT0C9B,AS1CyB,CPiD3B,AOjDsC2J,EPiDX5D,MOjDA,CPiD3B,GOjDkD,KALlD;APuDD,ADbG,AGeFqD,AJTC,AShDD,AFCA,GLmDF,GEKEA,GFFK,CDbGjG,IGeA,CHfK,GAAGnD,AGeJ,KHfS,AGeJ2I,CHfKzI,CQrC4C,ERqC7C,CAAnB,cGeU,CAAyBuD,IAAzB,CAA8B2F,QAA9B,CAAZ;AM1CI,ARyCJ,AEEA,AJTD,AS5CmE,AFJlE,GPNQ,UUoBC,CAAL,WDVoE,KAAI,CAACpJ,ELqD/D,GKrD0D,CLqDxE,AKrDmF4C,GAAX,EAAN;ACW5D,ARyCN,ADbE,AGeH,AJRD,AS9CoE,AFJlE,MH4DF,EFJMsD,EDbEhG,GAAG,CAAC4D,ES5BCuG,GRyCI,IAAIjE,CQzCb,AT4BA,CS5Bc,AT4BC,IAAf,CAAJ,EAA0B,ECa5B,EAAgC;AQzCXsD,AR0CnB,ADbE,ADONpH,ASpDE,AFCA,EPmDFA,AQ1DkC+G,UEsBXK,CAAC,AVrBd,EUqBgB,IAAI,CFtBaX,KEsBRpE,EHVV,GGUK,CAAW+E,KVoC7B9H,MAzDF,EAyDUQ,OAzDV,EAyDmBG,MAzDnB,EAyD2B;AUpCf,AR2ClB,ADbE,ADOJ,ASrDA,AFCA,QPoDIX,EEME+D,CQ3CA,CT8BE,EDOE,CAACnD,GEMG,CDbCW,ICaI2C,CDbX,ADOJ,KCPqB,ADOAvD,EEMvB,EAA2B8D,EFN7B,EAAiC,ECP7B,EAAiC,ICaI,CAACjG,MAAD,EAASuF,QAAT,EAAmBG,QAAnB,CAAZ;AAC5B,ADbK,ADOJlE,AStDF,AFCA,KLwDA,CFHEA,KEMK,CFNC,CAACD,CCPGoC,CCaDqC,QDbU,CDOnB,CAAmBhE,CEMd,ADbiBlC,ECaA,CDbG,CAAC8D,EDO1B,OCPsB,CAAc,CAAd,EAAiBC,WAAjB,EAAlB,CAD+B,CACoB;AS9BnD,AR4CJ,AFND,ASvDD,AFCA,KPoDA,MAEO,oBIOE;AFAPqC,ADdIrF,AGeN,AJPEW,ASxDF,AFCA,ML6DE0E,AFNA1E,MAAM,CAACO,EEME,CAAC/B,MAAD,CDdDyC,CCcU,CFNlB,CAAoBT,EEMX,EAAe0D,EDdpB,CAAc1F,ADQlB,EAA6BmC,GEMpB,CDdL,CCc8B,CAAzB,ADdiBwB,ADQ1B,EEMqC+B,ODdjC,CCcyC,CAACnF,ADdTwC,KAAjC,CCciC,GAAkB,CAA9C,CAAT;AQ5CE,AR6CH,ADdI,AGeL,AJPC,ASzDD,AFCA,KL2DO,IDdH,CGkBE8B,CFDC,EQ7CE,CAAL,CR6COiB,ADdA,GGeG,GAAG,KFDV,AECegD,CK1DK,CPyDH,IOzDQlJ,CL0DhC,IK1D2B,CAAW2J,QAAX,IAAuB,KANlD;ACmBM,AR6CJ,ADdIzF,AGgBN,AJRD,AS1DC,AFCA,GPNQ,OCuDFA,CGgBDO,KM/CM4F,CT+BE,CAAClG,GAAR,CAAY,AGgBlB,EM/CM,CAAc,AN+CD,AK5D+C,EFC3C,GH2DCnE,KAAxB,SHhBM;AS/Be0J,AR8CnBnD,ADdG,AGgBL,AJPF,AStDoE,AFLlE,MLgEEA,IEEE,CAAC,CMhDgBmD,CAAC,EAAE,CNgDdhF,EFFI,CAACtE,MAAD,AO3D0D,EP2DjDuF,AEEvB,EAAuB,CK7DqD,CAAC3F,GL6DjD0E,CFFd,CO3D0D,CP2DvC,AO3DkDkF,CP2DrE,EAAsBjE,EO3DoC,EAAN,CL6D3C,GFFqB,AEEF,CFFGhF,IEEEgE,EFFX,GAAkB,AEE/B,CFFT,AEHL,CFGP,AEIF;AMlDoB,AR+CnB,ADdE,ADSLlC,ASvDoE,AFLlE,EP4DFA,GENO,CAYL,CDvBE,GDjDM,CUwBF,ETiCG,IAAIvC,GAAG,KAAK,KDSdE,MCTE,ADzDD,ECyD0B,ADSnBsC,SAlEP,EAkEkB;AEO1B,ADfI,AGiBJ,AJRAtC,AS9DA,AFCA,IP6DAA,MAAM,CIQD8I,AJREvG,OIQP,EJRA,CIQe,AJREC,GAAjB,CAAqBF,CIQDkC,QJRpB,KIQe,EAAf,CARS,CAUT;AMpDM,ARiDN,ADfI3D,ADSL,AS/DC,AFCA,GPNQ,kBC2DAwB,QAAJ,CAAarC,MAAb,EAAqB+C,KAArB;ACgBJ,ADfG,AGkBH,AJRF,ASjEE,AFCA,ONmDS,MAGA,SGkBJ8B,QAAL,EAAe,KAAKiE,OAApB;AMpDI,ARkDJ,ADfI,AGmBJ,AJTFrG,ASlEE,AFCA,EPiEFA,SISO6C,AJhFG,OIgFR,GAAe,KAAf,MJTQtF,MAvEA,EAuEQL,IAvER,EAuEc+C,EAvEd,EAuEkB;AU5CpB,ARkDN,ADfI7B,AGmBL,AJTCb,ASnEA,AFYD,IPuDCA,MAAM,CAAC2C,KU7CK,IAAIuH,CTmCRpH,ISnCI,EAAN,AV6CN,CCVI,ADUoBnD,CCVRK,GDUhB,EAA8B0C,CCV1B,CDUJ,CCVwB5C,GAApB,EAAyBiD,KAAzB;ASjDF,ATkDC,ADUJ,ASpEC,GTLQ,wBSYmB,KAAKnD,KAAL,CAAW2J,QAAX,IAAuB,KAPlD;ACwBC,ARiDF,ADbE,ADUH,AStEE,KCOA,oBDAkE;APmErE,ADbE,ADUD3G,AShEoE,EPqEtE,AFLEA,WA5EU,YSYgE,KAAI,CAAChD,KTgEnEI,AShE8D,CAAWyJ,IAAX,CTZhE,CSY0D,CTgEhD9J,IA5EV,EA4EgB+C,EA5EhB,EA4EoB;AU7C5B,AToCH,ADUG1C,ASjEkE,EFZlCiJ,EP6EhCjJ,MU9CK2J,AV8CC,CAAC9G,SO7EkC8F,CG+BzC,GAAmB,MV8CnB,CAA2BhJ,IAA3B,CU9CyB,CV8CQ+C,EAAjC;AU7CE,ATqCN,ADSG,ASzEC,GTLQ,OUgCF,CAAC,MAAK6B,KAAL,CAAWwF,IAAhB,EAAsB,OAAO,KAAP;ARkD5B,AFFE,AS3EE,SP6EK7E,YAAT,CAAsBL,QAAtB,EAAgCC,QAAhC,EAA0C;AQjDpC,ARiDoC,AFDxChC,AS5EE,ET4EFA,IEGesD,GFpFL,CUiCA+D,IAAI,CRiD0B,GAEZtF,QAFY,CAEjC7E,CFHCA,KECgC,CFlF9B,EAiFMF,GAjFN,EAiFWiD,KUhDjB,AVjCM,EAiFkB;ACXvB,ADYH/C,AS7EA,IT6EAA,KCZYsD,CDYN,CAACN,YAAP,CCZG,ADYiBlD,CCZQkE,EDY5B,EAAyBjB,KCZtB,ADYH,ECZuC;ASpCrC,ARmDJ,ADfyC,ADaxC,AS9EC,GTLQ,GEqFJ4B,ADdOV,IAD4B,ESpChCgG,CTqCmBjG,ECcb,GAAGnD,EQnDd,CAAc,CToCuB,CAClClB,IADkC,ICenByB,aAAJ,CAAkBgF,SAAlB,CAAlB,CAHwC,CAKxC;AQpDMmD,ATmCmC,ADezC,AShFE,MRkEiB3J,ESpCb2J,GTmCmC,GACbvF,ESpCd,EAAE,IADE,CToCuB,CACtBpE,GQ1DU,ERyDY,EACD,CQ1DNA,KAAL,CAAW2J,QAAX,IAAuB,KARlD;AC+BIO,AVkDN7G,ASjFE,ETiFFA,MUlDM6G,IVpCI,IUoCI,EAAEH,ODvBoD,ICuBzC,CAAC,IVkDjB3J,MAtFD,EUoCwB,AVkDfF,GAtFT,EAsFc;AUjDhBqK,ARmDRtJ,ADhBA,ADeEb,AS1EkE,IT0ElEA,ECfEkE,ISnCIiG,AVkDA,CAACjH,GUlDG,ATmCA,CSnCC+G,ARmDTrI,EDhBWoC,MSnCP,CAAc,CDxBoD,CP2E1E,ADhBwB,ADetB,CECcW,ADhBST,ADeApE,GAAvB,AS1E4E,CAACF,IR2D/E,CCgBA,ADlByC,AQzDiC,CR4D1E,AQ5DqF8J,CP2E1DtD,IO3E+C,EAAN,GP2EpE,EANwC,CAOxC;AQnDUkD,AVkDT,AS3EmE,YCyB1DA,CAAC,EAAEa,IAAI,CAAC5F,KAAL,CAAW+E,CAAX,GAAe;AADN,ATqCtB,AD1EU,ASKR,CTLJ,KC0EM,CAACpF,ISrCG,ITqCR,EAAe;ASlCR,ARkDP,ADfE,AQtEA,MPqFImC,GQtDqB,EAIlB,IAJkB,ARsDZ,AFCFxF,CUzDK,ERwDA,8BAAiBiE,QAAjB,CAAlB;AQjDMiF,ATmCJ,AQvEA,QCoCIA,IAAI,EAAE;AAPM,ARyDlBlJ,ADdE,AQxEA,OC6BE,CT2CEoD,IAAI,CAACE,ECcP5C,ODdE,ICcN,ADdwB0C,CCcRU,GDdY,CAACR,KCc7B,EAA2BkC,EDdH,CAAejC,MCcvC,ADdE,EAA6C;ASlC5C,ARkDJ,ADfKF,AQzEF,KC0BA,CT+CEA,QAAQ,GAAG,IAAID,IAAJ,CAASrE,KAAT,CAAX;AACD,AQ1ED,KRqEa,CAOb;ASpCA,ARkDJ,AO1FI,SP0FKiG,CQlDA+D,QRkDT,CAAmB5J,EOhFE,EC8BjB,ERkDJ,CQlDyB,CRkDEyF,QAA3B,EAAqCG,CQlDN,ORkD/B,EAA+C;AQjDzC,ARkDJ,AO3FE,MP2FEH,IQlDI,IRkDI,EQlDClB,GRkDIqB,EQlDT,CAAWmE,IAAX,CRkDJ,IQlDwB,ARkDC,CAAC/J,IQlD1B,EAA+B,ARkDnC,EAAsC;AQjDhC4J,ATmCJ1F,AQ7EA,IR6EAA,ISnCI0F,ITmCI,CAACvF,QSnCQ,CAAC,ETmClB,GAAuBzE,CSnCA2E,ITmCvB,CSnCkB,CAAWuF,QAAZ,CAAb;AACAM,ARiDN,ADdElG,AQ9EA,IR8EAA,ECcE,EQjDEkG,ITmCI,CAAC9F,CSnCC,ARiDDmB,CQjDE4E,KAAP,CAAa,CRiDf,EDdF,GAAuBnG,CCcD,CQjDlB,MTmC2B,CCc7B,ADd8BK,ICcE,CDdlC,OCcyCqB,QAAP,MAAoB,QAAxD,EAAkE;AQhD7D,ARiDH,ADdD,AQ/EC,GRiEuC,CAgBzC,ICYMpC,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYiC,QAAZ,CAAX,CADgE,CAGhE;AO/FA,yBAWyB;ACkCvB,ARmDF,AOrFyB,SPqFpB,GQnDEwE,CRmDEzJ,CAAC,GAAG,CAAb,EQnDE,ARmDcA,CQnDA,ARmDC,GAAGgD,COrFW,GPqFP,CAACjD,COrFU,CAACX,IPqFpC,COrF+B,CPqFEY,AOrFSmJ,CPqFR,EAAlC,EAAsC,MOrFP,EAAN;ACmCrBI,ARmDF,ADfJ,AQvE2B,MRuErBjJ,ESpCAiJ,ERmDIjK,CDfC,CSpCD,CRmDG,CQnDD,AToCEoE,ECeEV,EQpDE,ERoDE,CAAChD,CA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","file":"simple-react.78399e21.js","sourceRoot":"..","sourcesContent":["// 创建一个虚拟dom\r\nexport function createVNode(type, props, ref, key, children, domElm, text) {\r\n  return {\r\n    type, //标签类型\r\n    props,  //标签属性\r\n    children, //子组件\r\n    ref,  //获取DOM元素\r\n    key,  //唯一标识\r\n    domElm,  //DOM元素\r\n    text, //文本内容\r\n  };\r\n}\r\n\r\nexport default function createElement(tag) {\r\n  const {elementName: type, attributes: data, children} = tag;\r\n  const {key, ref, ...props} = data;\r\n\r\n  // 处理子级列表中的 string or number 同样转换为 VNode\r\n  if (children && children.length) {\r\n    const length = children.length;\r\n    for (let i = 0; i < length; i++) {\r\n      const child = children[i];  //对每一个子节点进行遍历\r\n      if (['string', 'number'].includes(typeof child)) {\r\n        // 非标签的文字节点， vnode.type === undefined\r\n        children[i] = createVNode(\r\n          undefined,\r\n          {},\r\n          undefined,\r\n          undefined,\r\n          undefined,\r\n          undefined,\r\n          String(children[i])\r\n        );\r\n      }\r\n    }\r\n  }\r\n  return createVNode(type, props, ref, key, children, undefined, undefined);\r\n}","/*\r\n  原生dom操作\r\n* */\r\n\r\nconst dom = {\r\n  //根据vnode.type创建dom元素\r\n  createElement(vnode) {\r\n    return document.createElement(vnode.type);\r\n  },\r\n\r\n  //创建text节点\r\n  createTextNode(text) {\r\n    return document.createTextNode(text);\r\n  },\r\n\r\n  //修改文本节点的值\r\n  setTextContent(domElm, content) {\r\n    if (domElm && ['string', 'number'].includes(typeof content)) {\r\n      domElm.nodeValue = content;\r\n    }\r\n  },\r\n\r\n  //得到父元素\r\n  getParentNode(elm) {\r\n    return elm && elm.parentNode;\r\n  },\r\n\r\n  //增加子元素\r\n  appendChild(parent, child) {\r\n    // 若在JSX中渲染列表，则需要批量处理。\r\n    if (Array.isArray(child)) {\r\n      for (let item of child) {\r\n        parent.appendChild(item);\r\n      }\r\n    } else {\r\n      parent.appendChild(child);\r\n    }\r\n  },\r\n\r\n  //删除指定子元素\r\n  removeChild(parent, child) {\r\n    if (child && parent && child.parentNode) {\r\n      parent.removeChild(child);\r\n    }\r\n  },\r\n\r\n  //获取兄弟元素\r\n  getNextSibling(domElm) {\r\n    return domElm.nextSibling === null ? false : domElm.nextSibling;\r\n  },\r\n\r\n  //在前边插入节点\r\n  insertBefore(parent, newNode, refNode) {\r\n    if (refNode) {\r\n      parent.insertBefore(newNode, refNode);\r\n    } else {\r\n      dom.appendChild(parent, newNode);\r\n    }\r\n  },\r\n\r\n  //在后边插入节点\r\n  insertAfter(parent, newNode, before) {\r\n    if (parent.lastChild === before) {\r\n      parent.appendChild(newNode);\r\n    } else {\r\n      parent.insertBefore(newNode, before);\r\n    }\r\n  },\r\n\r\n  //绑定class\r\n  addClass(domElm, className) {\r\n    domElm.classList.add(className);\r\n  },\r\n\r\n  //绑定事件\r\n  bindEvent(domElm, type, fn) {\r\n    domElm.addEventListener(type, fn);\r\n  },\r\n\r\n  //解绑事件\r\n  removeEvent(domElm, type, fn) {\r\n    domElm.removeEventListener(type, fn);\r\n  },\r\n\r\n  //设置属性\r\n  setAttr(domElm, key, value) {\r\n    domElm.setAttribute(key, value);\r\n  },\r\n\r\n  //删除属性\r\n  removeAttr(domElm, key) {\r\n    domElm.removeAttribute(key);\r\n  },\r\n\r\n};\r\nexport default dom;","import dom from \"../utils/dom\";\r\n\r\n// 创建dom元素：虚拟dom => dom\r\nexport function createDomElement(vnode) {\r\n  //若type为function：组件元素\r\n  //先render出vnode节点\r\n\r\n  if (Array.isArray(vnode)) {\r\n    //如果是vnode是列表，则批量创建dom，并返回dom列表\r\n\r\n    let list = [];\r\n    for (let i = 0; i < vnode.length; i++)\r\n      list.push(createDomElement(vnode[i]));\r\n    return list;\r\n\r\n  } else {\r\n    if (typeof vnode.type === 'function') {\r\n      /**********    组件 ==> 组件实例 ==> 元素节点（elVNode）    ***********/\r\n      vnode = renderComponent(vnode);\r\n    }\r\n    const {children, type, text, props} = vnode;\r\n    if (type && typeof type === 'string') {\r\n      //type为字符串：dom元素\r\n      vnode.domElm = dom.createElement(vnode);//创建当前dom元素\r\n      if (Array.isArray(children)) {\r\n        //递归创建子元素\r\n        for (let i = 0; i < children.length; i++) {\r\n          dom.appendChild(vnode.domElm, createDomElement(children[i]));\r\n        }\r\n      }\r\n    } else if ((type === undefined || type === null) && text) {\r\n      //type为undefined：文本节点\r\n      vnode.domElm = dom.createTextNode(text);\r\n    }\r\n\r\n    if (vnode.domElm) {//如果创建成功了，则设置dom元素的属性\r\n      setDomProps(vnode.domElm, props);\r\n      return vnode.domElm;\r\n    } else {  //创建失败，则renderComponent后的vnode依然是组件节点，需要递归rener\r\n      return createDomElement(vnode);\r\n    }\r\n  }\r\n}\r\n\r\n// 为dom元素设置属性\r\nexport function setDomProps(domElm, props) {\r\n  if (domElm && typeof props === 'object') {\r\n    const keys = Object.keys(props);\r\n    for (let i = 0; i < keys.length; i++) {\r\n\r\n      const key = keys[i];\r\n      const value = props[key];\r\n\r\n      if (key.startsWith('on')) {\r\n        // 事件绑定\r\n        if (typeof value === 'function') {\r\n          const eventName = key.substring(2).toLowerCase();  // 去出on之后的字符串并转换为小写\r\n          dom.bindEvent(domElm, eventName, value);\r\n        } else {\r\n          console.log('Invalid EventHandler');\r\n        }\r\n      } else if (key === 'className') {\r\n        // 添加class\r\n        dom.addClass(domElm, value);\r\n      } else {\r\n        // 属性设置\r\n        dom.setAttr(domElm, key, value);\r\n      }\r\n\r\n    }\r\n  }\r\n}\r\n\r\n/**********    组件 ==> 组件实例 ==> 元素节点（elVNode）    ***********/\r\nexport function renderComponent(compVNode) {\r\n  const {type: Comp, props} = compVNode;  //compVNode：组件； instance：组件实例。  vnode：元素节点；\r\n  let instance = compVNode.instance;\r\n  // 当 instance 已经存在时，则不需要重新创建实例\r\n  if (!instance) {\r\n    // 传入 props，初始化组件实例\r\n    // 支持：类组件、函数组件\r\n    if (Comp.prototype && Comp.prototype.render) {\r\n      instance = new Comp(props);\r\n    }\r\n\r\n    // 初次渲染时：将来的属性与状态其实便是与当前值一致\r\n    instance.__nextProps = props;\r\n    instance.__nextState = instance.state;\r\n  }\r\n\r\n  // 调用 render 获取元素节点 VNode\r\n  const vnode = instance.__createVNode();\r\n\r\n  // 组件、元素、实例之间保持相互引用，有利于双向连接整棵虚拟树\r\n  instance.__component = compVNode; //组件\r\n  compVNode.instance = instance;  //组件实例\r\n  compVNode.vnode = vnode;    //元素节点\r\n  vnode.component = compVNode;  //组件\r\n\r\n  return vnode;\r\n}\r\n\r\n// 渲染函数\r\nexport default function render(vnode, parentDom) {\r\n  const domElm = createDomElement(vnode); //创建dom元素（可能是dom元素列表）\r\n  dom.appendChild(parentDom, domElm);  //将dom元素插入父节点\r\n  return domElm;\r\n}","import dom from \"../utils/dom\";\r\nimport {createDomElement, renderComponent, setDomProps} from \"./render\";\r\n\r\n//新旧节点相同：diff算法\r\nexport function diff(oldVNode, newVNode) {\r\n  if (isSameVNode(oldVNode, newVNode)) {\r\n    if (typeof oldVNode.type === 'function') {\r\n      // 组件节点\r\n      diffComponent(oldVNode, newVNode);\r\n    } else {\r\n      // 元素节点，直接执行比对\r\n      diffVNode(oldVNode, newVNode);\r\n    }\r\n  } else {\r\n    console.log('not same vnode');\r\n    replaceVNode(oldVNode, newVNode);\r\n  }\r\n}\r\n\r\n//组件节点diff\r\nfunction diffComponent(oldCompVNode, newCompVNode) {\r\n  const {instance, vnode: oldVNode, elm} = oldCompVNode;\r\n  const {props: nextProps} = newCompVNode;\r\n\r\n  if (instance && oldVNode) {\r\n    instance.__dirty = false;\r\n\r\n    // 更新状态和属性\r\n    instance.__nextProps = nextProps;\r\n    if (!instance.__nextState) instance.__nextState = instance.state;\r\n\r\n    // 复用旧组件实例和元素\r\n    newCompVNode.instance = instance;\r\n    newCompVNode.elm = elm;\r\n\r\n    // 使用新属性、新状态，旧组件实例\r\n    // 重新生成 新虚拟DOM\r\n    const newVNode = renderComponent(newCompVNode);\r\n\r\n    // 递归触发 diff\r\n    diff(oldVNode, newVNode);\r\n  }\r\n}\r\n\r\n//元素节点diff\r\nfunction diffVNode(oldVNode, newVNode) {\r\n\r\n  const {domElm, children: oldChild, text: oldText, props: oldProps} = oldVNode;\r\n  const {children: newChild, text: newText, props: newProps} = newVNode;\r\n\r\n  if (oldVNode === newVNode || !domElm) return;\r\n\r\n  // 节点相同，dom类型一定相同\r\n  newVNode.domElm = domElm;\r\n\r\n  //更新属性\r\n  diffProps(domElm, oldProps, newProps);\r\n\r\n  const hasOldChild = Boolean(oldChild && oldChild.length);\r\n  const hasNewChild = Boolean(newChild && newChild.length);\r\n\r\n  if (newText !== undefined) {\r\n    //新节点是文本节点\r\n    dom.setTextContent(domElm, newText);\r\n  } else {\r\n    // 新节点是元素节点\r\n    if (hasOldChild && hasNewChild) {\r\n      // 新旧节点均存在子级列表时，直接 diff 列表\r\n      if (oldChild !== newChild) diffChildren(domElm, oldChild, newChild);\r\n    } else if (hasNewChild) {\r\n      // 旧节点不包含子级，而新节点包含子级：直接新增新子级\r\n      addVNodes(domElm, null, newChild, 0, newChild.length - 1);\r\n    } else if (hasOldChild) {\r\n      // 新子级不包含元素，而旧节点包含子级：则需要删除旧子级\r\n      removeVNodes(domElm, oldChild, 0, oldChild.length - 1);\r\n    }\r\n    // else if (oldText !== undefined) {\r\n    // 当新旧均无子级\r\n    // 这里有可能存在 <Text> 标签，且新内容为空\r\n    // 因此直接清空旧元素文字\r\n    // dom.setTextContent(domElm, '');\r\n    // }\r\n  }\r\n}\r\n\r\n//新旧节点不同：直接替换\r\nfunction replaceVNode(oldVNode, newVNode) {\r\n\r\n  const {domElm: oldDomElm} = oldVNode;\r\n  const parentDom = dom.getParentNode(oldDomElm);\r\n\r\n  //删除旧dom\r\n  dom.removeChild(parentDom, oldDomElm);\r\n  //创建新dom\r\n  const newDomElm = createDomElement(newVNode);\r\n  dom.appendChild(parentDom, newDomElm);\r\n\r\n}\r\n\r\nfunction diffProps(domElm, oldProps, newProps) {\r\n  if (oldProps === newProps || !domElm) return;\r\n  if (typeof oldProps === 'object' && typeof newProps === 'object') {\r\n    let keys = Object.keys(oldProps);\r\n\r\n    //处理旧属性\r\n    for (let i = 0; i < keys.length; i++) {\r\n      const key = keys[i];\r\n      const oldV = oldProps[key], newV = newProps[key];\r\n\r\n\r\n      if (key.startsWith(\"on\")) {\r\n        //处理事件\r\n        if (typeof oldV === 'function' && oldV !== newV) {\r\n          //当存在旧事件，且新旧值不一致时：事件解绑\r\n          const eventName = key.substring(2).toLowerCase();\r\n          dom.removeEvent(domElm, eventName, oldV);\r\n        }\r\n      } else {\r\n        //普通属性处理\r\n        if (newV === undefined || (key === 'className' && (newV === false || newV === null))) {\r\n          // 若oldVNode中的属性在newVNode中不存在，则直接删除\r\n          // class属性需要特殊处理\r\n          dom.removeAttr(domElm, key === 'className' ? 'class' : key);\r\n        }\r\n      }\r\n    }\r\n\r\n    // 设置新属性\r\n    setDomProps(domElm, newProps);\r\n  }\r\n}\r\n\r\n//添加vnodes\r\nfunction addVNodes(domElm, before, children, start, end) {\r\n  before = !before ? null : before.domElm;\r\n  for (let i = start; i <= end; i++) {\r\n    let newDom = children[i].domElm || createDomElement(children[i]);\r\n    dom.insertAfter(domElm, newDom, before);\r\n    before = newDom;\r\n  }\r\n}\r\n\r\n//删除vnodes\r\nfunction removeVNodes(domElm, children, start, end) {\r\n  for (let i = start; i <= end; i++) {\r\n    dom.removeChild(domElm, children[i].domElm);\r\n  }\r\n}\r\n\r\n//对比子级列表\r\nfunction diffChildren(parentElm, oldChild, newChild) {\r\n\r\n  /**\r\n   * 更新子级列表\r\n   * 双列表游标 + while\r\n   */\r\n\r\n  if (Array.isArray(oldChild[0])) oldChild = oldChild[0];\r\n  if (Array.isArray(newChild[0])) newChild = newChild[0];\r\n\r\n  // 初始化游标\r\n  let oldStartIdx = 0, newStartIdx = 0;\r\n  let oldEndIdx = oldChild.length - 1, newEndIdx = newChild.length - 1;\r\n\r\n  // 列表首尾节点\r\n  let oldStartVNode = oldChild[0], oldEndVNode = oldChild[oldEndIdx];\r\n  let newStartVNode = newChild[0], newEndVNode = newChild[newEndIdx];\r\n\r\n  let oldKeyToIdx, idxInOld, elmToMove, before;\r\n\r\n  /**\r\n   * 当起始游标 < 终止游标时，\r\n   * 表示列表中仍有未 diff 的节点\r\n   * 进入循环\r\n   */\r\n  while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\r\n    /**\r\n     * 1. 排除非有效的节点\r\n     * 剔除列表中包含的 undefined || false || null\r\n     */\r\n    if (oldStartVNode == null) oldStartVNode = oldChild[++oldStartIdx];\r\n    else if (oldEndVNode == null) oldEndVNode = oldChild[--oldEndIdx];\r\n    else if (newStartVNode == null) newStartVNode = newChild[++newStartIdx];\r\n    else if (newEndVNode == null) newEndVNode = newChild[--newEndIdx];\r\n    else if (isSameVNode(oldStartVNode, newStartVNode)) {\r\n      /**\r\n       * 2. 正反向两两比对列表首项与末项匹配成功\r\n       * 移动游标，递归 diff 两个节点\r\n       * 均未匹配上，则进入 3. key 值比对\r\n       */\r\n\r\n      diff(oldStartVNode, newStartVNode);\r\n\r\n      oldStartVNode = oldChild[++oldStartIdx];\r\n      newStartVNode = newChild[++newStartIdx];\r\n    } else if (isSameVNode(oldEndVNode, newEndVNode)) {\r\n\r\n      diff(oldEndVNode, newEndVNode);\r\n\r\n      oldEndVNode = oldChild[--oldEndIdx];\r\n      newEndVNode = newChild[--newEndIdx];\r\n    } else if (isSameVNode(oldStartVNode, newEndVNode)) {\r\n\r\n      dom.insertBefore(parentElm, oldStartVNode.domElm, dom.getNextSibling(oldEndVNode.domElm));\r\n      diff(oldStartVNode, newEndVNode);\r\n\r\n      oldStartVNode = oldChild[++oldStartIdx];\r\n      newEndVNode = newChild[--newEndIdx];\r\n    } else if (isSameVNode(oldEndVNode, newStartVNode)) {\r\n\r\n      dom.insertBefore(parentElm, oldEndVNode.domElm, oldStartVNode.domElm);\r\n      diff(oldEndVNode, newStartVNode);\r\n\r\n      oldEndVNode = oldChild[--oldEndIdx];\r\n      newStartVNode = newChild[++newStartIdx];\r\n    } else {\r\n      /**\r\n       * 3. 两端比对均不匹配\r\n       * 进入 key 值比对\r\n       */\r\n      // 根据剩余的旧列表创建 key list\r\n      if (!oldKeyToIdx) oldKeyToIdx = createKeyList(oldChild, oldStartIdx, oldEndIdx);\r\n\r\n      // 判断新列表项的 key值 是否存在\r\n      idxInOld = oldKeyToIdx[newStartVNode.key || ''];\r\n      if (!idxInOld) {\r\n        /*\r\n         * 4. 新 key 值在旧列表中不存在\r\n         * 直接将该节点插入\r\n        */\r\n        dom.insertBefore(parentElm, createDomElement(newStartVNode), oldStartVNode.domElm);\r\n        newStartVNode = newChild[++newStartIdx];\r\n      } else {\r\n        /*\r\n        * 5. 新 key 在旧列表中存在时\r\n        * 继续判断是否为同类型节点\r\n        */\r\n        elmToMove = oldChild[idxInOld];\r\n        if (isSameVNode(elmToMove, newStartVNode)) {\r\n          /*\r\n          * 6. 新旧节点类型一致\r\n          * key 有效，直接移动并 diff\r\n          */\r\n          dom.insertBefore(parentElm, elmToMove.domElm, oldStartVNode.domElm);\r\n          diff(elmToMove, newStartVNode);\r\n\r\n          // 清空旧列表项\r\n          // 后续的比对可以直接跳过\r\n          oldChild[idxInOld] = undefined;\r\n        } else {\r\n          /*\r\n           * 7. 新旧节点类型不一致\r\n           * key 效，直接创建元素并插入\r\n          */\r\n          dom.insertBefore(parentElm, createDomElement(newStartVNode), oldStartVNode.domElm);\r\n        }\r\n        newStartVNode = newChild[++newStartIdx];\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * 8. 当有游标列表为空时，则结束循环，进入策略3\r\n   * 当 旧列表为空 时，则创建并插入新列表中的剩余节点\r\n   * 当 新列表为空 时，则删除旧列表中的剩余节点\r\n  */\r\n  if (oldStartIdx <= oldEndIdx || newStartIdx <= newEndIdx) {\r\n    if (oldStartIdx > oldEndIdx) {\r\n      // 新增节点\r\n      const vnode = newChild[newEndIdx + 1];\r\n      addVNodes(parentElm, vnode, newChild, newStartIdx, newEndIdx);\r\n    } else {\r\n      // 删除节点\r\n      removeVNodes(parentElm, oldChild, oldStartIdx, oldEndIdx);\r\n    }\r\n  }\r\n}\r\n\r\n// 对比两vnode是否是相同的\r\nfunction isSameVNode(oldVNode, newVNode) {\r\n  return oldVNode.key === newVNode.key && oldVNode.type === newVNode.type;\r\n}\r\n\r\n//工具函数 创建key列表\r\nfunction createKeyList(children, start, end) {\r\n  let map = {};\r\n  for (let i = start; i <= end; i++) {\r\n    const {key} = children[i];\r\n    if (key) map[key] = i;\r\n  }\r\n  return map;\r\n}","const defer = fn => {Promise.resolve().then(fn);}; //微任务 不阻塞宏任务（渲染等\r\n\r\nconst updateQueue = [];\r\n\r\n// 队列更新 API\r\nexport function enqueueRender(updater) {\r\n  // 将所有 updater 同步推入更新队列中\r\n  // 为实例添加一个属性 __dirty，标识是否处于待更新状态\r\n  // 初始 和 更新完毕，该值会被置为 false\r\n  // 推入队列时，标记为 true\r\n  if (\r\n    !updater.__dirty &&\r\n    (updater.__dirty = true) &&\r\n    updateQueue.push(updater) === 1\r\n  ) {\r\n    // 异步化冲洗队列\r\n    // 最终只执行一次冲洗\r\n    defer(flushRenderQueue);\r\n  }\r\n}\r\n\r\n// 合并一次循环中多次 updater\r\nfunction flushRenderQueue() {\r\n  if (updateQueue.length) {\r\n    // 排序更新队列\r\n    updateQueue.sort();\r\n\r\n    // 循环队列出栈\r\n    let curUpdater = updateQueue.pop();\r\n    while (curUpdater) {\r\n\r\n      // 当组件处于 待更新态 时，触发组件更新\r\n      // 如果该组件已经被更新完毕，则该状态为 false\r\n      // 则后续的更新均不再执行\r\n      if (curUpdater.__dirty) {\r\n        // 调用组件自身的更新函数\r\n        curUpdater.__update();\r\n\r\n        // 执行 callback\r\n        flushCallback(curUpdater);\r\n      }\r\n      // curUpdater.__dirty = false;\r\n      curUpdater = updateQueue.pop();\r\n    }\r\n  }\r\n}\r\n\r\n// 执行缓存在 updater.__setStateCallbacks 上的回调\r\nfunction flushCallback(updater) {\r\n  const callbacks = updater.__setStateCallbacks;\r\n  let cbk;\r\n  if (callbacks && callbacks.length) {\r\n    while (cbk = callbacks.shift()) cbk.call(updater);\r\n  }\r\n}","import {diff} from \"../dom_methods/diff\";\r\nimport {enqueueRender} from \"./update\";\r\n\r\nexport default class Component {\r\n\r\n  // 通过保持三份不同的时期的快照\r\n  // 有利于对组件的状态及属性的管理和追踪\r\n\r\n  // 属性\r\n  // public __prevProps\r\n  // public props = {}\r\n  // public __nextProps\r\n\r\n  // 状态\r\n  // public __prevState\r\n  // public state = {}\r\n  // public __nextState\r\n\r\n  // 储存当前组件渲染出的VNode\r\n  // public __vnode\r\n\r\n  // 储存组件节点\r\n  // public __component\r\n\r\n  constructor(props) {\r\n    this.props = props;\r\n    this.__setStateCallbacks = [];\r\n  }\r\n\r\n  render() {\r\n    //由组件实例实现\r\n    return null;\r\n  }\r\n\r\n  __createVNode() {\r\n    // 该方法用于封装重新执行 render 的逻辑\r\n\r\n    // state 与 props 状态变更的逻辑\r\n    this.__prevProps = this.props;\r\n    this.__prevState = this.state;\r\n\r\n    this.props = this.__nextProps;\r\n    this.state = this.__nextState;\r\n\r\n    this.__nextState = undefined;\r\n    this.__nextProps = undefined;\r\n\r\n    // 重新执行 render 生成 VNode\r\n    this.__vnode = this.render();\r\n    return this.__vnode;\r\n  }\r\n\r\n  //更新state\r\n  setState(operater, callback) {\r\n    // 合并状态, 暂存于即将更新态中\r\n    if (typeof operater === 'function') {\r\n      operater = operater(this.state, this.props);\r\n    }\r\n\r\n    //setState帮你合并\r\n    this.__nextState = {\r\n      ...this.state,\r\n      ...operater,\r\n    };\r\n\r\n    // 调用更新，并执行回调\r\n    callback && this.__setStateCallbacks.push(callback);\r\n    enqueueRender(this);\r\n  }\r\n\r\n  //更新状态，调用diff\r\n  __update() {\r\n    // 临时存储 旧虚拟节点 (oldVNode)\r\n    const oldVNode = this.__vnode;\r\n\r\n    this.__nextProps = this.props;\r\n    if (!this.__nextState) this.__nextState = this.state;\r\n\r\n    // 重新生成 新虚拟节点(newVNode)\r\n    this.__vnode = this.__createVNode();\r\n\r\n    // 调用 diff，更新 VNode\r\n    diff(oldVNode, this.__vnode);\r\n\r\n    this.__dirty = false;\r\n  };\r\n}","import createElement from \"./main_methods/createElement\";\r\nimport Component from \"./main_methods/Component\";\r\n\r\nconst SmpReact = {\r\n  createElement,\r\n  Component\r\n};\r\n\r\nexport default SmpReact;","import render from \"./dom_methods/render\";\r\n\r\nconst SmpReactDom = {\r\n  render,\r\n};\r\n\r\nexport default SmpReactDom;","import SmpReact from \"../../SmpReact/SmpReact\";\r\nimport imgsrc from \"../../assets/gamepad.png\";\r\nimport \"./style.css\";\r\n\r\nexport default class Footer extends SmpReact.Component {\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <header className=\"wrapper\">\r\n        <div class=\"box\">\r\n          <img className=\"logo\" src={imgsrc} alt=\"\"/>\r\n          <div class=\"textWrapper\">\r\n            <div className=\"title\">Counter-Demo</div>\r\n            <div className=\"tips\">powered by SmpReact</div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n    );\r\n  }\r\n}","import SmpReact from \"../../SmpReact/SmpReact\";\r\nimport \"./style.css\";\r\n\r\nexport default class Footer extends SmpReact.Component {\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <footer>\r\n        <div className=\"txt\">Oliver-ysq</div>\r\n        <div className=\"txt\"><a target=\"_blank\" href=\"https://github.com/Oliver-Ysq\">https://github.com/Oliver-Ysq</a>\r\n        </div>\r\n      </footer>);\r\n  }\r\n}","import SmpReact from \"../../SmpReact/SmpReact\";\r\nimport \"./style.css\";\r\n\r\nexport default class Counter extends SmpReact.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"listWrapper\">\r\n        <div className=\"display\">{this.props.n}</div>\r\n        <div className=\"btnWrapper\">\r\n          <div>\r\n            <button className={this.props.disabled && 'ban'} onClick={() => this.props.add()}>+1</button>\r\n            <button className={this.props.disabled && 'ban'} onClick={() => this.props.minus()}>-1</button>\r\n            <button className={this.props.disabled && 'ban'} onClick={() => this.props.mult()}>×2</button>\r\n            <button className={this.props.disabled && 'ban'} onClick={() => this.props.clear()}>clear</button>\r\n          </div>\r\n          <div class=\"secondLine\">\r\n            <button onClick={() => this.props.setInterval()}>setInterval</button>\r\n            <button onClick={() => this.props.clearInterval()}>clearInterval</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}","import SmpReact from \"./src/SmpReact/SmpReact\";\r\nimport \"./App.css\";\r\nimport Header from \"./src/components/Header/Header\";\r\nimport Footer from \"./src/components/Footer/Footer\";\r\nimport Counter from \"./src/components/Counter/Counter\";\r\n\r\nexport default class App extends SmpReact.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      n: 0,\r\n      interval: null,\r\n      flag: true,\r\n      disabled: false\r\n    };\r\n\r\n    this.calc = (type) => {\r\n      switch (type) {\r\n        case 0:\r\n          this.setState({n: this.state.n + 1});\r\n          break;\r\n        case 1:\r\n          this.setState({n: this.state.n - 1});\r\n          break;\r\n        case 2:\r\n          this.setState({n: 2 * this.state.n});\r\n          break;\r\n        case 3:\r\n          this.setState({n: 0});\r\n          break;\r\n        default:\r\n          throw new Error();\r\n      }\r\n    };\r\n\r\n    this.setInterval = () => {\r\n      if (!this.state.flag) return false;\r\n      const that = this;\r\n      this.setState({\r\n        disabled: true,\r\n        interval: setInterval(() => {\r\n          that.setState({\r\n            n: that.state.n + 1\r\n          });\r\n        }, 1000),\r\n        flag: false\r\n      });\r\n    };\r\n\r\n    this.clearInterval = () => {\r\n      if (this.state.flag === false) {\r\n        clearInterval(this.state.interval);\r\n        window.alert(\"定时器已关闭\");\r\n      }\r\n      this.setState({\r\n        flag: true,\r\n        interval: null,\r\n        disabled: false\r\n      });\r\n    };\r\n\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"page\">\r\n        <Header/>\r\n        <main>\r\n          <Counter disabled={this.state.disabled} n={this.state.n} interval={this.state.interval}\r\n                   add={() => this.calc(0)} minus={() => this.calc(1)}\r\n                   mult={() => this.calc(2)}\r\n                   clear={() => this.calc(3)} setInterval={() => this.setInterval()}\r\n                   clearInterval={() => this.clearInterval()}/>\r\n        </main>\r\n        <Footer/>\r\n      </div>\r\n    );\r\n  }\r\n}","import SmpReact from \"./src/SmpReact/SmpReact\";\r\nimport SmpReactDom from \"./src/SmpReact/SmpReactDom\";\r\nimport App from \"./App\";\r\n\r\nSmpReactDom.render(<App/>,\r\n  document.getElementById(\"root\"));","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}